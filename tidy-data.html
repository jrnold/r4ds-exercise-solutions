<!DOCTYPE html>
<html lang="" xml:lang="">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>12 Tidy data | R for Data Science: Exercise Solutions</title>
<meta name="description" content="Solutions to the exercises in “R for Data Science” by Garrett Grolemund and Hadley Wickham.">
<meta name="generator" content="bookdown 0.20.1 and GitBook 2.6.7">
<meta property="og:title" content="12 Tidy data | R for Data Science: Exercise Solutions">
<meta property="og:type" content="book">
<meta property="og:url" content="http://jrnold.github.io/r4ds-exercise-solutions">
<meta property="og:image" content="http://jrnold.github.io/r4ds-exercise-solutions/img/r4ds-exercise-solutions-cover.png">
<meta property="og:description" content="Solutions to the exercises in “R for Data Science” by Garrett Grolemund and Hadley Wickham.">
<meta name="github-repo" content="jrnold/r4ds-exercise-solutions">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="12 Tidy data | R for Data Science: Exercise Solutions">
<meta name="twitter:site" content="@jrnld">
<meta name="twitter:description" content="Solutions to the exercises in “R for Data Science” by Garrett Grolemund and Hadley Wickham.">
<meta name="twitter:image" content="http://jrnold.github.io/r4ds-exercise-solutions/img/r4ds-exercise-solutions-cover.png">
<meta name="author" content="Jeffrey B. Arnold">
<meta name="date" content="2020-07-19">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="prev" href="data-import.html">
<link rel="next" href="relational-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script><link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet">
<script src="libs/str_view-binding-1.4.0/str_view.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-61453123-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-61453123-2');
</script><!--
License: MIT License
Copyright (c) 2016 Open Review Toolkit & Ben Marwick

See https://github.com/benmarwick/bookdown-ort/blob/master/hypothesis.html
--><script async defer src="https://hypothes.is/embed.js"></script><script>window.hypothesisConfig = function () { return {showHighlights: false}; };</script><style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<link rel="stylesheet" href="includes/r4ds.css" type="text/css">
<link rel="stylesheet" href="includes/r4ds-solutions.css" type="text/css">
<link rel="stylesheet" href="includes/ort.css" type="text/css">
</head>
<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation"><ul class="summary">
<li><strong><a href="./">R for Data Science:<br>Exercise Solutions</a></strong></li>

<li class="divider">
<li class="chapter" data-level="" data-path="index.html">
<a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul>
</li>
<li class="chapter" data-level="1" data-path="introduction.html">
<a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#how-this-book-is-organized"><i class="fa fa-check"></i>How this book is organized</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#bugscontributing"><i class="fa fa-check"></i>Bugs/Contributing</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i>Colophon</a></li>
</ul>
</li>
<li class="part"><span><b>I Explore</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="data-visualisation.html">
<a href="data-visualisation.html"><i class="fa fa-check"></i><b>3</b> Data visualisation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation.html">
<a href="data-visualisation.html#first-steps"><i class="fa fa-check"></i><b>3.2</b> First steps</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.1"><i class="fa fa-check"></i>Exercise 3.2.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.2"><i class="fa fa-check"></i>Exercise 3.2.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.3"><i class="fa fa-check"></i>Exercise 3.2.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.4"><i class="fa fa-check"></i>Exercise 3.2.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.5"><i class="fa fa-check"></i>Exercise 3.2.5</a></li>
</ul>
</li>
<li class="chapter" data-level="3.3" data-path="data-visualisation.html">
<a href="data-visualisation.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.3</b> Aesthetic mappings</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.1"><i class="fa fa-check"></i>Exercise 3.3.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.2"><i class="fa fa-check"></i>Exercise 3.3.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.3"><i class="fa fa-check"></i>Exercise 3.3.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.4"><i class="fa fa-check"></i>Exercise 3.3.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.5"><i class="fa fa-check"></i>Exercise 3.3.5</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.6"><i class="fa fa-check"></i>Exercise 3.3.6</a></li>
</ul>
</li>
<li class="chapter" data-level="3.4" data-path="data-visualisation.html"><a href="data-visualisation.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation.html">
<a href="data-visualisation.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.1"><i class="fa fa-check"></i>Exercise 3.5.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.2"><i class="fa fa-check"></i>Exercise 3.5.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.3"><i class="fa fa-check"></i>Exercise 3.5.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.4"><i class="fa fa-check"></i>Exercise 3.5.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.5"><i class="fa fa-check"></i>Exercise 3.5.5</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.6"><i class="fa fa-check"></i>Exercise 3.5.6</a></li>
</ul>
</li>
<li class="chapter" data-level="3.6" data-path="data-visualisation.html">
<a href="data-visualisation.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric objects</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.1"><i class="fa fa-check"></i>Exercise 3.6.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.2"><i class="fa fa-check"></i>Exercise 3.6.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.3"><i class="fa fa-check"></i>Exercise 3.6.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.4"><i class="fa fa-check"></i>Exercise 3.6.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.5"><i class="fa fa-check"></i>Exercise 3.6.5</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.6"><i class="fa fa-check"></i>Exercise 3.6.6</a></li>
</ul>
</li>
<li class="chapter" data-level="3.7" data-path="data-visualisation.html">
<a href="data-visualisation.html#statistical-transformations"><i class="fa fa-check"></i><b>3.7</b> Statistical transformations</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.1"><i class="fa fa-check"></i>Exercise 3.7.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.2"><i class="fa fa-check"></i>Exercise 3.7.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.3"><i class="fa fa-check"></i>Exercise 3.7.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.4"><i class="fa fa-check"></i>Exercise 3.7.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.5"><i class="fa fa-check"></i>Exercise 3.7.5</a></li>
</ul>
</li>
<li class="chapter" data-level="3.8" data-path="data-visualisation.html">
<a href="data-visualisation.html#position-adjustments"><i class="fa fa-check"></i><b>3.8</b> Position adjustments</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.1"><i class="fa fa-check"></i>Exercise 3.8.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.2"><i class="fa fa-check"></i>Exercise 3.8.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.3"><i class="fa fa-check"></i>Exercise 3.8.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.4"><i class="fa fa-check"></i>Exercise 3.8.4</a></li>
</ul>
</li>
<li class="chapter" data-level="3.9" data-path="data-visualisation.html">
<a href="data-visualisation.html#coordinate-systems"><i class="fa fa-check"></i><b>3.9</b> Coordinate systems</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.1"><i class="fa fa-check"></i>Exercise 3.9.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.2"><i class="fa fa-check"></i>Exercise 3.9.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.3"><i class="fa fa-check"></i>Exercise 3.9.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.4"><i class="fa fa-check"></i>Exercise 3.9.4</a></li>
</ul>
</li>
<li class="chapter" data-level="3.10" data-path="data-visualisation.html"><a href="data-visualisation.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.10</b> The layered grammar of graphics</a></li>
</ul>
</li>
<li class="chapter" data-level="4" data-path="workflow-basics.html">
<a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow: basics</a><ul>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4.1"><i class="fa fa-check"></i>Exercise 4.1</a></li>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4.2"><i class="fa fa-check"></i>Exercise 4.2</a></li>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4.3"><i class="fa fa-check"></i>Exercise 4.3</a></li>
</ul>
</li>
<li class="chapter" data-level="5" data-path="transform.html">
<a href="transform.html"><i class="fa fa-check"></i><b>5</b> Data transformation</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="transform.html">
<a href="transform.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>5.2</b> Filter rows with <code>filter()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.1"><i class="fa fa-check"></i>Exercise 5.2.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.2"><i class="fa fa-check"></i>Exercise 5.2.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.3"><i class="fa fa-check"></i>Exercise 5.2.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.4"><i class="fa fa-check"></i>Exercise 5.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="5.3" data-path="transform.html">
<a href="transform.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>5.3</b> Arrange rows with <code>arrange()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.1"><i class="fa fa-check"></i>Exercise 5.3.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.2"><i class="fa fa-check"></i>Exercise 5.3.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.3"><i class="fa fa-check"></i>Exercise 5.3.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.4"><i class="fa fa-check"></i>Exercise 5.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="5.4" data-path="transform.html">
<a href="transform.html#select"><i class="fa fa-check"></i><b>5.4</b> Select columns with <code>select()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.1"><i class="fa fa-check"></i>Exercise 5.4.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.2"><i class="fa fa-check"></i>Exercise 5.4.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.3"><i class="fa fa-check"></i>Exercise 5.4.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.4"><i class="fa fa-check"></i>Exercise 5.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="5.5" data-path="transform.html">
<a href="transform.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>5.5</b> Add new variables with <code>mutate()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.1"><i class="fa fa-check"></i>Exercise 5.5.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.2"><i class="fa fa-check"></i>Exercise 5.5.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.3"><i class="fa fa-check"></i>Exercise 5.5.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.4"><i class="fa fa-check"></i>Exercise 5.5.4</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.5"><i class="fa fa-check"></i>Exercise 5.5.5</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.6"><i class="fa fa-check"></i>Exercise 5.5.6</a></li>
</ul>
</li>
<li class="chapter" data-level="5.6" data-path="transform.html">
<a href="transform.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i><b>5.6</b> Grouped summaries with <code>summarise()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.1"><i class="fa fa-check"></i>Exercise 5.6.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.2"><i class="fa fa-check"></i>Exercise 5.6.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.3"><i class="fa fa-check"></i>Exercise 5.6.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.4"><i class="fa fa-check"></i>Exercise 5.6.4</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.5"><i class="fa fa-check"></i>Exercise 5.6.5</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.6"><i class="fa fa-check"></i>Exercise 5.6.6</a></li>
</ul>
</li>
<li class="chapter" data-level="5.7" data-path="transform.html">
<a href="transform.html#grouped-mutates-and-filters"><i class="fa fa-check"></i><b>5.7</b> Grouped mutates (and filters)</a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.1"><i class="fa fa-check"></i>Exercise 5.7.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.2"><i class="fa fa-check"></i>Exercise 5.7.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.3"><i class="fa fa-check"></i>Exercise 5.7.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.4"><i class="fa fa-check"></i>Exercise 5.7.4</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.5"><i class="fa fa-check"></i>Exercise 5.7.5</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.6"><i class="fa fa-check"></i>Exercise 5.7.6</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.7"><i class="fa fa-check"></i>Exercise 5.7.7</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.8"><i class="fa fa-check"></i>Exercise 5.7.8</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html">
<a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> Workflow: scripts</a><ul>
<li class="chapter" data-level="" data-path="workflow-scripts.html"><a href="workflow-scripts.html#exercise-6.1"><i class="fa fa-check"></i>Exercise 6.1</a></li>
<li class="chapter" data-level="" data-path="workflow-scripts.html"><a href="workflow-scripts.html#exercise-6.2"><i class="fa fa-check"></i>Exercise 6.2</a></li>
</ul>
</li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#questions"><i class="fa fa-check"></i><b>7.2</b> Questions</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html#variation"><i class="fa fa-check"></i><b>7.3</b> Variation</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.1"><i class="fa fa-check"></i>Exercise 7.3.1</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.2"><i class="fa fa-check"></i>Exercise 7.3.2</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.3"><i class="fa fa-check"></i>Exercise 7.3.3</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.4"><i class="fa fa-check"></i>Exercise 7.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html#missing-values-2"><i class="fa fa-check"></i><b>7.4</b> Missing values</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.4.1"><i class="fa fa-check"></i>Exercise 7.4.1</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.4.2"><i class="fa fa-check"></i>Exercise 7.4.2</a></li>
</ul>
</li>
<li class="chapter" data-level="7.5" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html#covariation"><i class="fa fa-check"></i><b>7.5</b> Covariation</a><ul>
<li class="chapter" data-level="7.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-categorical-and-continuous-variable"><i class="fa fa-check"></i><b>7.5.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-categorical-variables"><i class="fa fa-check"></i><b>7.5.2</b> Two categorical variables</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-continuous-variables"><i class="fa fa-check"></i><b>7.5.3</b> Two continuous variables</a></li>
</ul>
</li>
<li class="chapter" data-level="7.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#patterns-and-models"><i class="fa fa-check"></i><b>7.6</b> Patterns and models</a></li>
<li class="chapter" data-level="7.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#ggplot2-calls"><i class="fa fa-check"></i><b>7.7</b> ggplot2 calls</a></li>
<li class="chapter" data-level="7.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#learning-more"><i class="fa fa-check"></i><b>7.8</b> Learning more</a></li>
</ul>
</li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow: projects</a></li>
<li class="part"><span><b>II Wrangle</b></span></li>
<li class="chapter" data-level="9" data-path="wrangle-intro.html"><a href="wrangle-intro.html"><i class="fa fa-check"></i><b>9</b> Introduction</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html">
<a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a><ul>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.1"><i class="fa fa-check"></i>Exercise 10.1</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.2"><i class="fa fa-check"></i>Exercise 10.2</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.3"><i class="fa fa-check"></i>Exercise 10.3</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.4"><i class="fa fa-check"></i>Exercise 10.4</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.5"><i class="fa fa-check"></i>Exercise 10.5</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.6"><i class="fa fa-check"></i>Exercise 10.6</a></li>
</ul>
</li>
<li class="chapter" data-level="11" data-path="data-import.html">
<a href="data-import.html"><i class="fa fa-check"></i><b>11</b> Data import</a><ul>
<li class="chapter" data-level="11.1" data-path="data-import.html"><a href="data-import.html#introduction-5"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="data-import.html">
<a href="data-import.html#getting-started"><i class="fa fa-check"></i><b>11.2</b> Getting started</a><ul>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.1"><i class="fa fa-check"></i>Exercise 11.2.1</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.2"><i class="fa fa-check"></i>Exercise 11.2.2</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.3"><i class="fa fa-check"></i>Exercise 11.2.3</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.4"><i class="fa fa-check"></i>Exercise 11.2.4</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.5"><i class="fa fa-check"></i>Exercise 11.2.5</a></li>
</ul>
</li>
<li class="chapter" data-level="11.3" data-path="data-import.html">
<a href="data-import.html#parsing-a-vector"><i class="fa fa-check"></i><b>11.3</b> Parsing a vector</a><ul>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.3"><i class="fa fa-check"></i>Exercise 11.3.3</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.4"><i class="fa fa-check"></i>Exercise 11.3.4</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.5"><i class="fa fa-check"></i>Exercise 11.3.5</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.6"><i class="fa fa-check"></i>Exercise 11.3.6</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.7"><i class="fa fa-check"></i>Exercise 11.3.7</a></li>
</ul>
</li>
<li class="chapter" data-level="11.4" data-path="data-import.html"><a href="data-import.html#parsing-a-file"><i class="fa fa-check"></i><b>11.4</b> Parsing a file</a></li>
<li class="chapter" data-level="11.5" data-path="data-import.html"><a href="data-import.html#writing-to-a-file"><i class="fa fa-check"></i><b>11.5</b> Writing to a file</a></li>
<li class="chapter" data-level="11.6" data-path="data-import.html"><a href="data-import.html#other-types-of-data"><i class="fa fa-check"></i><b>11.6</b> Other types of data</a></li>
</ul>
</li>
<li class="chapter" data-level="12" data-path="tidy-data.html">
<a href="tidy-data.html"><i class="fa fa-check"></i><b>12</b> Tidy data</a><ul>
<li class="chapter" data-level="12.1" data-path="tidy-data.html"><a href="tidy-data.html#introduction-6"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="tidy-data.html">
<a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>12.2</b> Tidy data</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.2.1"><i class="fa fa-check"></i>Exercise 12.2.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.2.2"><i class="fa fa-check"></i>Exercise 12.2.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.2.3"><i class="fa fa-check"></i>Exercise 12.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="12.3" data-path="tidy-data.html">
<a href="tidy-data.html#pivoting"><i class="fa fa-check"></i><b>12.3</b> Pivoting</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.1"><i class="fa fa-check"></i>Exercise 12.3.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.2"><i class="fa fa-check"></i>Exercise 12.3.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.3"><i class="fa fa-check"></i>Exercise 12.3.3</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.4"><i class="fa fa-check"></i>Exercise 12.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="12.4" data-path="tidy-data.html">
<a href="tidy-data.html#separating-and-uniting"><i class="fa fa-check"></i><b>12.4</b> Separating and uniting</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.4.1"><i class="fa fa-check"></i>Exercise 12.4.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.4.2"><i class="fa fa-check"></i>Exercise 12.4.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.4.3"><i class="fa fa-check"></i>Exercise 12.4.3</a></li>
</ul>
</li>
<li class="chapter" data-level="12.5" data-path="tidy-data.html">
<a href="tidy-data.html#missing-values-3"><i class="fa fa-check"></i><b>12.5</b> Missing values</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.5.1"><i class="fa fa-check"></i>Exercise 12.5.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.5.2"><i class="fa fa-check"></i>Exercise 12.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="12.6" data-path="tidy-data.html">
<a href="tidy-data.html#case-study"><i class="fa fa-check"></i><b>12.6</b> Case Study</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.1"><i class="fa fa-check"></i>Exercise 12.6.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.2"><i class="fa fa-check"></i>Exercise 12.6.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.3"><i class="fa fa-check"></i>Exercise 12.6.3</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.4"><i class="fa fa-check"></i>Exercise 12.6.4</a></li>
</ul>
</li>
<li class="chapter" data-level="12.7" data-path="tidy-data.html"><a href="tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>12.7</b> Non-tidy data</a></li>
</ul>
</li>
<li class="chapter" data-level="13" data-path="relational-data.html">
<a href="relational-data.html"><i class="fa fa-check"></i><b>13</b> Relational data</a><ul>
<li class="chapter" data-level="13.1" data-path="relational-data.html"><a href="relational-data.html#introduction-7"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="relational-data.html">
<a href="relational-data.html#nycflights13-relational"><i class="fa fa-check"></i><b>13.2</b> nycflights13</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.1"><i class="fa fa-check"></i>Exercise 13.2.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.2"><i class="fa fa-check"></i>Exercise 13.2.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.3"><i class="fa fa-check"></i>Exercise 13.2.3</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.4"><i class="fa fa-check"></i>Exercise 13.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="13.3" data-path="relational-data.html">
<a href="relational-data.html#keys"><i class="fa fa-check"></i><b>13.3</b> Keys</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.3.1"><i class="fa fa-check"></i>Exercise 13.3.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.3.2"><i class="fa fa-check"></i>Exercise 13.3.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.3.3"><i class="fa fa-check"></i>Exercise 13.3.3</a></li>
</ul>
</li>
<li class="chapter" data-level="13.4" data-path="relational-data.html">
<a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>13.4</b> Mutating joins</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.1"><i class="fa fa-check"></i>Exercise 13.4.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.2"><i class="fa fa-check"></i>Exercise 13.4.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.3"><i class="fa fa-check"></i>Exercise 13.4.3</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.4"><i class="fa fa-check"></i>Exercise 13.4.4</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.5"><i class="fa fa-check"></i>Exercise 13.4.5</a></li>
</ul>
</li>
<li class="chapter" data-level="13.5" data-path="relational-data.html">
<a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>13.5</b> Filtering joins</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.1"><i class="fa fa-check"></i>Exercise 13.5.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.2"><i class="fa fa-check"></i>Exercise 13.5.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.3"><i class="fa fa-check"></i>Exercise 13.5.3</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.4"><i class="fa fa-check"></i>Exercise 13.5.4</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.5"><i class="fa fa-check"></i>Exercise 13.5.5</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.6"><i class="fa fa-check"></i>Exercise 13.5.6</a></li>
</ul>
</li>
<li class="chapter" data-level="13.6" data-path="relational-data.html"><a href="relational-data.html#join-problems"><i class="fa fa-check"></i><b>13.6</b> Join problems</a></li>
<li class="chapter" data-level="13.7" data-path="relational-data.html"><a href="relational-data.html#set-operations"><i class="fa fa-check"></i><b>13.7</b> Set operations</a></li>
</ul>
</li>
<li class="chapter" data-level="14" data-path="strings.html">
<a href="strings.html"><i class="fa fa-check"></i><b>14</b> Strings</a><ul>
<li class="chapter" data-level="14.1" data-path="strings.html"><a href="strings.html#introduction-8"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="strings.html">
<a href="strings.html#string-basics"><i class="fa fa-check"></i><b>14.2</b> String basics</a><ul>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.1"><i class="fa fa-check"></i>Exercise 14.2.1</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.2"><i class="fa fa-check"></i>Exercise 14.2.2</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.3"><i class="fa fa-check"></i>Exercise 14.2.3</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.4"><i class="fa fa-check"></i>Exercise 14.2.4</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.5"><i class="fa fa-check"></i>Exercise 14.2.5</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.6"><i class="fa fa-check"></i>Exercise 14.2.6</a></li>
</ul>
</li>
<li class="chapter" data-level="14.3" data-path="strings.html">
<a href="strings.html#matching-patterns-with-regular-expressions"><i class="fa fa-check"></i><b>14.3</b> Matching patterns with regular expressions</a><ul>
<li class="chapter" data-level="14.3.1" data-path="strings.html"><a href="strings.html#basic-matches"><i class="fa fa-check"></i><b>14.3.1</b> Basic matches</a></li>
<li class="chapter" data-level="14.3.2" data-path="strings.html"><a href="strings.html#anchors"><i class="fa fa-check"></i><b>14.3.2</b> Anchors</a></li>
<li class="chapter" data-level="14.3.3" data-path="strings.html"><a href="strings.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>14.3.3</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="14.3.4" data-path="strings.html"><a href="strings.html#repetition"><i class="fa fa-check"></i><b>14.3.4</b> Repetition</a></li>
<li class="chapter" data-level="14.3.5" data-path="strings.html"><a href="strings.html#grouping-and-backreferences"><i class="fa fa-check"></i><b>14.3.5</b> Grouping and backreferences</a></li>
</ul>
</li>
<li class="chapter" data-level="14.4" data-path="strings.html">
<a href="strings.html#tools"><i class="fa fa-check"></i><b>14.4</b> Tools</a><ul>
<li class="chapter" data-level="14.4.1" data-path="strings.html"><a href="strings.html#detect-matches"><i class="fa fa-check"></i><b>14.4.1</b> Detect matches</a></li>
<li class="chapter" data-level="14.4.2" data-path="strings.html"><a href="strings.html#extract-matches"><i class="fa fa-check"></i><b>14.4.2</b> Extract matches</a></li>
<li class="chapter" data-level="14.4.3" data-path="strings.html"><a href="strings.html#grouped-matches"><i class="fa fa-check"></i><b>14.4.3</b> Grouped matches</a></li>
<li class="chapter" data-level="14.4.4" data-path="strings.html"><a href="strings.html#replacing-matches"><i class="fa fa-check"></i><b>14.4.4</b> Replacing matches</a></li>
<li class="chapter" data-level="14.4.5" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>14.4.5</b> Splitting</a></li>
<li class="chapter" data-level="14.4.6" data-path="strings.html"><a href="strings.html#find-matches"><i class="fa fa-check"></i><b>14.4.6</b> Find matches</a></li>
</ul>
</li>
<li class="chapter" data-level="14.5" data-path="strings.html">
<a href="strings.html#other-types-of-pattern"><i class="fa fa-check"></i><b>14.5</b> Other types of pattern</a><ul>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.5.1"><i class="fa fa-check"></i>Exercise 14.5.1</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.5.2"><i class="fa fa-check"></i>Exercise 14.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="14.6" data-path="strings.html"><a href="strings.html#other-uses-of-regular-expressions"><i class="fa fa-check"></i><b>14.6</b> Other uses of regular expressions</a></li>
<li class="chapter" data-level="14.7" data-path="strings.html">
<a href="strings.html#stringi"><i class="fa fa-check"></i><b>14.7</b> stringi</a><ul>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.7.1"><i class="fa fa-check"></i>Exercise 14.7.1</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.7.2"><i class="fa fa-check"></i>Exercise 14.7.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="15" data-path="factors.html">
<a href="factors.html"><i class="fa fa-check"></i><b>15</b> Factors</a><ul>
<li class="chapter" data-level="15.1" data-path="factors.html"><a href="factors.html#introduction-9"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="factors.html"><a href="factors.html#creating-factors"><i class="fa fa-check"></i><b>15.2</b> Creating factors</a></li>
<li class="chapter" data-level="15.3" data-path="factors.html">
<a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>15.3</b> General Social Survey</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.3.1"><i class="fa fa-check"></i>Exercise 15.3.1</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.3.2"><i class="fa fa-check"></i>Exercise 15.3.2</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.3.3"><i class="fa fa-check"></i>Exercise 15.3.3</a></li>
</ul>
</li>
<li class="chapter" data-level="15.4" data-path="factors.html">
<a href="factors.html#modifying-factor-order"><i class="fa fa-check"></i><b>15.4</b> Modifying factor order</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.4.1"><i class="fa fa-check"></i>Exercise 15.4.1</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.4.2"><i class="fa fa-check"></i>Exercise 15.4.2</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.4.3"><i class="fa fa-check"></i>Exercise 15.4.3</a></li>
</ul>
</li>
<li class="chapter" data-level="15.5" data-path="factors.html">
<a href="factors.html#modifying-factor-levels"><i class="fa fa-check"></i><b>15.5</b> Modifying factor levels</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.5.1"><i class="fa fa-check"></i>Exercise 15.5.1</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.5.2"><i class="fa fa-check"></i>Exercise 15.5.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="16" data-path="dates-and-times.html">
<a href="dates-and-times.html"><i class="fa fa-check"></i><b>16</b> Dates and times</a><ul>
<li class="chapter" data-level="16.1" data-path="dates-and-times.html"><a href="dates-and-times.html#introduction-10"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="dates-and-times.html">
<a href="dates-and-times.html#creating-datetimes"><i class="fa fa-check"></i><b>16.2</b> Creating date/times</a><ul>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.2.1"><i class="fa fa-check"></i>Exercise 16.2.1</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.2.2"><i class="fa fa-check"></i>Exercise 16.2.2</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.2.3"><i class="fa fa-check"></i>Exercise 16.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="16.3" data-path="dates-and-times.html">
<a href="dates-and-times.html#date-time-components"><i class="fa fa-check"></i><b>16.3</b> Date-time components</a><ul>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.1"><i class="fa fa-check"></i>Exercise 16.3.1</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.2"><i class="fa fa-check"></i>Exercise 16.3.2</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.3"><i class="fa fa-check"></i>Exercise 16.3.3</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.4"><i class="fa fa-check"></i>Exercise 16.3.4</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.5"><i class="fa fa-check"></i>Exercise 16.3.5</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.6"><i class="fa fa-check"></i>Exercise 16.3.6</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.7"><i class="fa fa-check"></i>Exercise 16.3.7</a></li>
</ul>
</li>
<li class="chapter" data-level="16.4" data-path="dates-and-times.html">
<a href="dates-and-times.html#time-spans"><i class="fa fa-check"></i><b>16.4</b> Time spans</a><ul>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.1"><i class="fa fa-check"></i>Exercise 16.4.1</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.2"><i class="fa fa-check"></i>Exercise 16.4.2</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.3"><i class="fa fa-check"></i>Exercise 16.4.3</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.4"><i class="fa fa-check"></i>Exercise 16.4.4</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.5"><i class="fa fa-check"></i>Exercise 16.4.5</a></li>
</ul>
</li>
<li class="chapter" data-level="16.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>16.5</b> Time zones</a></li>
</ul>
</li>
<li class="part"><span><b>III Program</b></span></li>
<li class="chapter" data-level="17" data-path="program-intro.html"><a href="program-intro.html"><i class="fa fa-check"></i><b>17</b> Introduction</a></li>
<li class="chapter" data-level="18" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>18</b> Pipes</a></li>
<li class="chapter" data-level="19" data-path="functions.html">
<a href="functions.html"><i class="fa fa-check"></i><b>19</b> Functions</a><ul>
<li class="chapter" data-level="19.1" data-path="functions.html"><a href="functions.html#introduction-12"><i class="fa fa-check"></i><b>19.1</b> Introduction</a></li>
<li class="chapter" data-level="19.2" data-path="functions.html">
<a href="functions.html#when-should-you-write-a-function"><i class="fa fa-check"></i><b>19.2</b> When should you write a function?</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.1"><i class="fa fa-check"></i>Exercise 19.2.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.2"><i class="fa fa-check"></i>Exercise 19.2.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.3"><i class="fa fa-check"></i>Exercise 19.2.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.4"><i class="fa fa-check"></i>Exercise 19.2.4</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.5"><i class="fa fa-check"></i>Exercise 19.2.5</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.6"><i class="fa fa-check"></i>Exercise 19.2.6</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.7"><i class="fa fa-check"></i>Exercise 19.2.7</a></li>
</ul>
</li>
<li class="chapter" data-level="19.3" data-path="functions.html">
<a href="functions.html#functions-are-for-humans-and-computers"><i class="fa fa-check"></i><b>19.3</b> Functions are for humans and computers</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.1"><i class="fa fa-check"></i>Exercise 19.3.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.2"><i class="fa fa-check"></i>Exercise 19.3.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.3"><i class="fa fa-check"></i>Exercise 19.3.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.4"><i class="fa fa-check"></i>Exercise 19.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="19.4" data-path="functions.html">
<a href="functions.html#conditional-execution"><i class="fa fa-check"></i><b>19.4</b> Conditional execution</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.1"><i class="fa fa-check"></i>Exercise 19.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.2"><i class="fa fa-check"></i>Exercise 19.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.3"><i class="fa fa-check"></i>Exercise 19.4.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.4"><i class="fa fa-check"></i>Exercise 19.4.4</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.5"><i class="fa fa-check"></i>Exercise 19.4.5</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.6"><i class="fa fa-check"></i>Exercise 19.4.6</a></li>
</ul>
</li>
<li class="chapter" data-level="19.5" data-path="functions.html">
<a href="functions.html#function-arguments"><i class="fa fa-check"></i><b>19.5</b> Function arguments</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.1"><i class="fa fa-check"></i>Exercise 19.5.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.2"><i class="fa fa-check"></i>Exercise 19.5.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.3"><i class="fa fa-check"></i>Exercise 19.5.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.4"><i class="fa fa-check"></i>Exercise 19.5.4</a></li>
</ul>
</li>
<li class="chapter" data-level="19.6" data-path="functions.html"><a href="functions.html#return-values"><i class="fa fa-check"></i><b>19.6</b> Return values</a></li>
<li class="chapter" data-level="19.7" data-path="functions.html"><a href="functions.html#environment"><i class="fa fa-check"></i><b>19.7</b> Environment</a></li>
</ul>
</li>
<li class="chapter" data-level="20" data-path="vectors.html">
<a href="vectors.html"><i class="fa fa-check"></i><b>20</b> Vectors</a><ul>
<li class="chapter" data-level="20.1" data-path="vectors.html"><a href="vectors.html#introduction-13"><i class="fa fa-check"></i><b>20.1</b> Introduction</a></li>
<li class="chapter" data-level="20.2" data-path="vectors.html"><a href="vectors.html#vector-basics"><i class="fa fa-check"></i><b>20.2</b> Vector basics</a></li>
<li class="chapter" data-level="20.3" data-path="vectors.html">
<a href="vectors.html#important-types-of-atomic-vector"><i class="fa fa-check"></i><b>20.3</b> Important types of atomic vector</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.1"><i class="fa fa-check"></i>Exercise 20.3.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.2"><i class="fa fa-check"></i>Exercise 20.3.2</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.3"><i class="fa fa-check"></i>Exercise 20.3.3</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.4"><i class="fa fa-check"></i>Exercise 20.3.4</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.5"><i class="fa fa-check"></i>Exercise 20.3.5</a></li>
</ul>
</li>
<li class="chapter" data-level="20.4" data-path="vectors.html">
<a href="vectors.html#using-atomic-vectors"><i class="fa fa-check"></i><b>20.4</b> Using atomic vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.1"><i class="fa fa-check"></i>Exercise 20.4.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.2"><i class="fa fa-check"></i>Exercise 20.4.2</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.3"><i class="fa fa-check"></i>Exercise 20.4.3</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.4"><i class="fa fa-check"></i>Exercise 20.4.4</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.5"><i class="fa fa-check"></i>Exercise 20.4.5</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.6"><i class="fa fa-check"></i>Exercise 20.4.6</a></li>
</ul>
</li>
<li class="chapter" data-level="20.5" data-path="vectors.html">
<a href="vectors.html#lists"><i class="fa fa-check"></i><b>20.5</b> Recursive vectors (lists)</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.5.1"><i class="fa fa-check"></i>Exercise 20.5.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.5.2"><i class="fa fa-check"></i>Exercise 20.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="20.6" data-path="vectors.html"><a href="vectors.html#attributes"><i class="fa fa-check"></i><b>20.6</b> Attributes</a></li>
<li class="chapter" data-level="20.7" data-path="vectors.html">
<a href="vectors.html#augmented-vectors"><i class="fa fa-check"></i><b>20.7</b> Augmented vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.7.1"><i class="fa fa-check"></i>Exercise 20.7.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.7.2"><i class="fa fa-check"></i>Exercise 20.7.2</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.7.3"><i class="fa fa-check"></i>Exercise 20.7.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="21" data-path="iteration.html">
<a href="iteration.html"><i class="fa fa-check"></i><b>21</b> Iteration</a><ul>
<li class="chapter" data-level="21.1" data-path="iteration.html"><a href="iteration.html#introduction-14"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="iteration.html">
<a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>21.2</b> For loops</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.2.1"><i class="fa fa-check"></i>Exercise 21.2.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.2.2"><i class="fa fa-check"></i>Exercise 21.2.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.2.3"><i class="fa fa-check"></i>Exercise 21.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="21.3" data-path="iteration.html">
<a href="iteration.html#for-loop-variations"><i class="fa fa-check"></i><b>21.3</b> For loop variations</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.1"><i class="fa fa-check"></i>Exercise 21.3.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.2"><i class="fa fa-check"></i>Exercise 21.3.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.3"><i class="fa fa-check"></i>Exercise 21.3.3</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.4"><i class="fa fa-check"></i>Exercise 21.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="21.4" data-path="iteration.html">
<a href="iteration.html#for-loops-vs.functionals"><i class="fa fa-check"></i><b>21.4</b> For loops vs. functionals</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.4.1"><i class="fa fa-check"></i>Exercise 21.4.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.4.2"><i class="fa fa-check"></i>Exercise 21.4.2</a></li>
</ul>
</li>
<li class="chapter" data-level="21.5" data-path="iteration.html">
<a href="iteration.html#the-map-functions"><i class="fa fa-check"></i><b>21.5</b> The map functions</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.1"><i class="fa fa-check"></i>Exercise 21.5.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.2"><i class="fa fa-check"></i>Exercise 21.5.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.3"><i class="fa fa-check"></i>Exercise 21.5.3</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.4"><i class="fa fa-check"></i>Exercise 21.5.4</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.5"><i class="fa fa-check"></i>Exercise 21.5.5</a></li>
</ul>
</li>
<li class="chapter" data-level="21.6" data-path="iteration.html"><a href="iteration.html#dealing-with-failure"><i class="fa fa-check"></i><b>21.6</b> Dealing with failure</a></li>
<li class="chapter" data-level="21.7" data-path="iteration.html"><a href="iteration.html#mapping-over-multiple-arguments"><i class="fa fa-check"></i><b>21.7</b> Mapping over multiple arguments</a></li>
<li class="chapter" data-level="21.8" data-path="iteration.html"><a href="iteration.html#walk"><i class="fa fa-check"></i><b>21.8</b> Walk</a></li>
<li class="chapter" data-level="21.9" data-path="iteration.html">
<a href="iteration.html#other-patterns-of-for-loops"><i class="fa fa-check"></i><b>21.9</b> Other patterns of for loops</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.9.1"><i class="fa fa-check"></i>Exercise 21.9.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.9.2"><i class="fa fa-check"></i>Exercise 21.9.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.9.3"><i class="fa fa-check"></i>Exercise 21.9.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="part"><span><b>IV Model</b></span></li>
<li class="chapter" data-level="22" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>22</b> Introduction</a></li>
<li class="chapter" data-level="23" data-path="model-basics.html">
<a href="model-basics.html"><i class="fa fa-check"></i><b>23</b> Model basics</a><ul>
<li class="chapter" data-level="23.1" data-path="model-basics.html"><a href="model-basics.html#introduction-15"><i class="fa fa-check"></i><b>23.1</b> Introduction</a></li>
<li class="chapter" data-level="23.2" data-path="model-basics.html">
<a href="model-basics.html#a-simple-model"><i class="fa fa-check"></i><b>23.2</b> A simple model</a><ul>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.2.1"><i class="fa fa-check"></i>Exercise 23.2.1</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.2.2"><i class="fa fa-check"></i>Exercise 23.2.2</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.2.3"><i class="fa fa-check"></i>Exercise 23.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="23.3" data-path="model-basics.html">
<a href="model-basics.html#visualising-models"><i class="fa fa-check"></i><b>23.3</b> Visualising models</a><ul>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.1"><i class="fa fa-check"></i>Exercise 23.3.1</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.2"><i class="fa fa-check"></i>Exercise 23.3.2</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.3"><i class="fa fa-check"></i>Exercise 23.3.3</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.4"><i class="fa fa-check"></i>Exercise 23.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="23.4" data-path="model-basics.html">
<a href="model-basics.html#formulas-and-model-families"><i class="fa fa-check"></i><b>23.4</b> Formulas and model families</a><ul>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.1"><i class="fa fa-check"></i>Exercise 23.4.1</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.2"><i class="fa fa-check"></i>Exercise 23.4.2</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.3"><i class="fa fa-check"></i>Exercise 23.4.3</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.4"><i class="fa fa-check"></i>Exercise 23.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="23.5" data-path="model-basics.html"><a href="model-basics.html#missing-values-5"><i class="fa fa-check"></i><b>23.5</b> Missing values</a></li>
<li class="chapter" data-level="23.6" data-path="model-basics.html"><a href="model-basics.html#other-model-families"><i class="fa fa-check"></i><b>23.6</b> Other model families</a></li>
</ul>
</li>
<li class="chapter" data-level="24" data-path="model-building.html">
<a href="model-building.html"><i class="fa fa-check"></i><b>24</b> Model building</a><ul>
<li class="chapter" data-level="24.1" data-path="model-building.html"><a href="model-building.html#introduction-16"><i class="fa fa-check"></i><b>24.1</b> Introduction</a></li>
<li class="chapter" data-level="24.2" data-path="model-building.html">
<a href="model-building.html#diamond-prices"><i class="fa fa-check"></i><b>24.2</b> Why are low quality diamonds more expensive?</a><ul>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.1"><i class="fa fa-check"></i>Exercise 24.2.1</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.2"><i class="fa fa-check"></i>Exercise 24.2.2</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.3"><i class="fa fa-check"></i>Exercise 24.2.3</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.4"><i class="fa fa-check"></i>Exercise 24.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="24.3" data-path="model-building.html">
<a href="model-building.html#what-affects-the-number-of-daily-flights"><i class="fa fa-check"></i><b>24.3</b> What affects the number of daily flights?</a><ul>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.1"><i class="fa fa-check"></i>Exercise 24.3.1</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.2"><i class="fa fa-check"></i>Exercise 24.3.2</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.3"><i class="fa fa-check"></i>Exercise 24.3.3</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.4"><i class="fa fa-check"></i>Exercise 24.3.4</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.5"><i class="fa fa-check"></i>Exercise 24.3.5</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.6"><i class="fa fa-check"></i>Exercise 24.3.6</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.7"><i class="fa fa-check"></i>Exercise 24.3.7</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.8"><i class="fa fa-check"></i>Exercise 24.3.8</a></li>
</ul>
</li>
<li class="chapter" data-level="24.4" data-path="model-building.html"><a href="model-building.html#learning-more-about-models"><i class="fa fa-check"></i><b>24.4</b> Learning more about models</a></li>
</ul>
</li>
<li class="chapter" data-level="25" data-path="many-models.html">
<a href="many-models.html"><i class="fa fa-check"></i><b>25</b> Many models</a><ul>
<li class="chapter" data-level="25.1" data-path="many-models.html"><a href="many-models.html#introduction-17"><i class="fa fa-check"></i><b>25.1</b> Introduction</a></li>
<li class="chapter" data-level="25.2" data-path="many-models.html">
<a href="many-models.html#gapminder"><i class="fa fa-check"></i><b>25.2</b> gapminder</a><ul>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.2.1"><i class="fa fa-check"></i>Exercise 25.2.1</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.2.2"><i class="fa fa-check"></i>Exercise 25.2.2</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.2.3"><i class="fa fa-check"></i>Exercise 25.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="25.3" data-path="many-models.html"><a href="many-models.html#list-columns-1"><i class="fa fa-check"></i><b>25.3</b> List-columns</a></li>
<li class="chapter" data-level="25.4" data-path="many-models.html">
<a href="many-models.html#creating-list-columns"><i class="fa fa-check"></i><b>25.4</b> Creating list-columns</a><ul>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.1"><i class="fa fa-check"></i>Exercise 25.4.1</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.2"><i class="fa fa-check"></i>Exercise 25.4.2</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.3"><i class="fa fa-check"></i>Exercise 25.4.3</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.4"><i class="fa fa-check"></i>Exercise 25.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="25.5" data-path="many-models.html">
<a href="many-models.html#simplifying-list-columns"><i class="fa fa-check"></i><b>25.5</b> Simplifying list-columns</a><ul>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.5.1"><i class="fa fa-check"></i>Exercise 25.5.1</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.5.2"><i class="fa fa-check"></i>Exercise 25.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="25.6" data-path="many-models.html"><a href="many-models.html#making-tidy-data-with-broom"><i class="fa fa-check"></i><b>25.6</b> Making tidy data with broom</a></li>
</ul>
</li>
<li class="part"><span><b>V Communicate</b></span></li>
<li class="chapter" data-level="26" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>26</b> Introduction</a></li>
<li class="chapter" data-level="27" data-path="r-markdown.html">
<a href="r-markdown.html"><i class="fa fa-check"></i><b>27</b> R Markdown</a><ul>
<li class="chapter" data-level="27.1" data-path="r-markdown.html"><a href="r-markdown.html#introduction-18"><i class="fa fa-check"></i><b>27.1</b> Introduction</a></li>
<li class="chapter" data-level="27.2" data-path="r-markdown.html">
<a href="r-markdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>27.2</b> R Markdown basics</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.1"><i class="fa fa-check"></i>Exercise 27.2.1</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.2"><i class="fa fa-check"></i>Exercise 27.2.2</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.3"><i class="fa fa-check"></i>Exercise 27.2.3</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.4"><i class="fa fa-check"></i>Exercise 27.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="27.3" data-path="r-markdown.html">
<a href="r-markdown.html#text-formatting-with-markdown"><i class="fa fa-check"></i><b>27.3</b> Text formatting with Markdown</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.3.1"><i class="fa fa-check"></i>Exercise 27.3.1</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.3.2"><i class="fa fa-check"></i>Exercise 27.3.2</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.3.3"><i class="fa fa-check"></i>Exercise 27.3.3</a></li>
</ul>
</li>
<li class="chapter" data-level="27.4" data-path="r-markdown.html">
<a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>27.4</b> Code chunks</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.1"><i class="fa fa-check"></i>Exercise 27.4.1</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.2"><i class="fa fa-check"></i>Exercise 27.4.2</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.3"><i class="fa fa-check"></i>Exercise 27.4.3</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.4"><i class="fa fa-check"></i>Exercise 27.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="27.5" data-path="r-markdown.html"><a href="r-markdown.html#troubleshooting"><i class="fa fa-check"></i><b>27.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="27.6" data-path="r-markdown.html"><a href="r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>27.6</b> YAML header</a></li>
<li class="chapter" data-level="27.7" data-path="r-markdown.html"><a href="r-markdown.html#learning-more-3"><i class="fa fa-check"></i><b>27.7</b> Learning more</a></li>
</ul>
</li>
<li class="chapter" data-level="28" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>28</b> Graphics for communication</a><ul>
<li class="chapter" data-level="28.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-19"><i class="fa fa-check"></i><b>28.1</b> Introduction</a></li>
<li class="chapter" data-level="28.2" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>28.2</b> Label</a><ul>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.2.1"><i class="fa fa-check"></i>Exercise 28.2.1</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.2.2"><i class="fa fa-check"></i>Exercise 28.2.2</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.2.3"><i class="fa fa-check"></i>Exercise 28.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="28.3" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>28.3</b> Annotations</a><ul>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.1"><i class="fa fa-check"></i>Exercise 28.3.1</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.2"><i class="fa fa-check"></i>Exercise 28.3.2</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.3"><i class="fa fa-check"></i>Exercise 28.3.3</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.4"><i class="fa fa-check"></i>Exercise 28.3.4</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.5"><i class="fa fa-check"></i>Exercise 28.3.5</a></li>
</ul>
</li>
<li class="chapter" data-level="28.4" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>28.4</b> Scales</a><ul>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.1"><i class="fa fa-check"></i>Exercise 28.4.1</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.2"><i class="fa fa-check"></i>Exercise 28.4.2</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.3"><i class="fa fa-check"></i>Exercise 28.4.3</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.4"><i class="fa fa-check"></i>Exercise 28.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="28.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#zooming"><i class="fa fa-check"></i><b>28.5</b> Zooming</a></li>
<li class="chapter" data-level="28.6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>28.6</b> Themes</a></li>
<li class="chapter" data-level="28.7" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>28.7</b> Saving your plots</a></li>
<li class="chapter" data-level="28.8" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#learning-more-4"><i class="fa fa-check"></i><b>28.8</b> Learning more</a></li>
</ul>
</li>
<li class="chapter" data-level="29" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html"><i class="fa fa-check"></i><b>29</b> R Markdown formats</a></li>
<li class="chapter" data-level="30" data-path="r-markdown-workflow.html"><a href="r-markdown-workflow.html"><i class="fa fa-check"></i><b>30</b> R Markdown workflow</a></li>
<li class="part"><span><b>VI Appendixes</b></span></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider">
<li><a href="https://github.com/rstudio/bookdown">Proudly published with bookdown</a></li>

</ul></nav>
</div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science: Exercise Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-"><div class="alert alert-info hints-alert">
  <div class="hints-icon">
    <i class="fa fa-comments-o"></i>
  </div>
  <div class="hints-container">
    <b>I need your help!</b>
    <p>
    If you find any typos, errors, or places where the text may be improved, please let me know.
    The best ways to provide feedback are by GitHub or hypothes.is annotations.
    </p>

    <p>
      <i class="fa fa-github"></i>
      Opening an <a href="https://github.com/jrnold/r4ds-exercise-solutions/issues">issue</a> or submitting a <a href="https://github.com/jrnold/r4ds-exercise-solutions/pulls">pull request</a> on <a href="https://github.com/jrnold/r4ds-exercise-solutions">GitHub</a>
    </p>
    <p>
      <img style="display: inline;" src="https://hypothes.is/organizations/__default__/logo" alt="Hypothesis">
      Adding an annotation using <a href="https://hypothes.is">hypothes.is</a>.
      To add an annotation, <span style="background-color: #3297FD; color: white">select some text</span> and then click the
      <span class="svg-icon--inline"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" class="annotator-adder-actions__icon"><path fill="currentColor" fill-rule="nonzero" d="M15 0c.27 0 .505.099.703.297A.961.961 0 0116 1v15l-4-3H1a.974.974 0 01-.703-.29A.953.953 0 010 12V1C0 .719.096.482.29.29A.966.966 0 011 0h14zM7 3l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C4.156 5.229 4 6 4 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188C4.729 8.854 5.082 9 5.5 9c.417 0 .77-.146 1.063-.438C6.854 8.271 7 7.918 7 7.5c0-.417-.146-.77-.438-1.063A1.447 1.447 0 005.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L7 4V3zm5 0l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C9.156 5.229 9 6 9 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188c.291.291.645.437 1.062.437.417 0 .77-.146 1.063-.438.291-.291.437-.645.437-1.062 0-.417-.146-.77-.438-1.063A1.447 1.447 0 0010.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L12 4V3z"></path></svg></span>
      on the pop-up menu.
      To see the annotations of others, click the
      <span class="svg-icon--inline"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" class=""><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 12L6 8l4-4"></path></g></svg></span>
      in the upper right-hand corner of the page.
    </p>
  </div>
</div>
<div id="tidy-data" class="section level1 r4ds-section">
<h1>
<a href="#tidy-data" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12</span> Tidy data<a href="https://r4ds.had.co.nz/tidy-data.html#tidy-data" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h1>
<div id="introduction-6" class="section level2 r4ds-section">
<h2>
<a href="#introduction-6" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.1</span> Introduction<a href="https://r4ds.had.co.nz/tidy-data.html#introduction-6" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" data-line-number="1"><span class="kw">library</span>(<span class="st">"tidyverse"</span>)</a></code></pre></div>
</div>
<div id="tidy-data-1" class="section level2 r4ds-section">
<h2>
<a href="#tidy-data-1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.2</span> Tidy data<a href="https://r4ds.had.co.nz/tidy-data.html#tidy-data-1" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-12.2.1" class="section level3 unnumbered exercise" data-number="12.2.1">
<h3>Exercise 12.2.1<a href="#exercise-12.2.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Using prose, describe how the variables and observations are organized in each of the sample tables.</p>
</div>
<div class="answer">
<p>In table <code>table1</code>, each row represents a (country, year) combination.
The columns <code>cases</code> and <code>population</code> contain the values for those variables.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" data-line-number="1">table1</a>
<a class="sourceLine" id="cb333-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb333-3" data-line-number="3"><span class="co">#&gt;   country      year  cases population</span></a>
<a class="sourceLine" id="cb333-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb333-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan  1999    745   19987071</span></a>
<a class="sourceLine" id="cb333-6" data-line-number="6"><span class="co">#&gt; 2 Afghanistan  2000   2666   20595360</span></a>
<a class="sourceLine" id="cb333-7" data-line-number="7"><span class="co">#&gt; 3 Brazil       1999  37737  172006362</span></a>
<a class="sourceLine" id="cb333-8" data-line-number="8"><span class="co">#&gt; 4 Brazil       2000  80488  174504898</span></a>
<a class="sourceLine" id="cb333-9" data-line-number="9"><span class="co">#&gt; 5 China        1999 212258 1272915272</span></a>
<a class="sourceLine" id="cb333-10" data-line-number="10"><span class="co">#&gt; 6 China        2000 213766 1280428583</span></a></code></pre></div>
<p>In <code>table2</code>, each row represents a (country, year, variable) combination.
The column <code>count</code> contains the values of variables <code>cases</code> and <code>population</code> in separate rows.</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb334-1" data-line-number="1">table2</a>
<a class="sourceLine" id="cb334-2" data-line-number="2"><span class="co">#&gt; # A tibble: 12 x 4</span></a>
<a class="sourceLine" id="cb334-3" data-line-number="3"><span class="co">#&gt;   country      year type           count</span></a>
<a class="sourceLine" id="cb334-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb334-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan  1999 cases            745</span></a>
<a class="sourceLine" id="cb334-6" data-line-number="6"><span class="co">#&gt; 2 Afghanistan  1999 population  19987071</span></a>
<a class="sourceLine" id="cb334-7" data-line-number="7"><span class="co">#&gt; 3 Afghanistan  2000 cases           2666</span></a>
<a class="sourceLine" id="cb334-8" data-line-number="8"><span class="co">#&gt; 4 Afghanistan  2000 population  20595360</span></a>
<a class="sourceLine" id="cb334-9" data-line-number="9"><span class="co">#&gt; 5 Brazil       1999 cases          37737</span></a>
<a class="sourceLine" id="cb334-10" data-line-number="10"><span class="co">#&gt; 6 Brazil       1999 population 172006362</span></a>
<a class="sourceLine" id="cb334-11" data-line-number="11"><span class="co">#&gt; # … with 6 more rows</span></a></code></pre></div>
<p>In <code>table3</code>, each row represents a (country, year) combination.
The column <code>rate</code> provides the values of both <code>cases</code> and <code>population</code> in a string formatted like <code>cases / population</code>.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" data-line-number="1">table3</a>
<a class="sourceLine" id="cb335-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb335-3" data-line-number="3"><span class="co">#&gt;   country      year rate             </span></a>
<a class="sourceLine" id="cb335-4" data-line-number="4"><span class="co">#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            </span></a>
<a class="sourceLine" id="cb335-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan  1999 745/19987071     </span></a>
<a class="sourceLine" id="cb335-6" data-line-number="6"><span class="co">#&gt; 2 Afghanistan  2000 2666/20595360    </span></a>
<a class="sourceLine" id="cb335-7" data-line-number="7"><span class="co">#&gt; 3 Brazil       1999 37737/172006362  </span></a>
<a class="sourceLine" id="cb335-8" data-line-number="8"><span class="co">#&gt; 4 Brazil       2000 80488/174504898  </span></a>
<a class="sourceLine" id="cb335-9" data-line-number="9"><span class="co">#&gt; 5 China        1999 212258/1272915272</span></a>
<a class="sourceLine" id="cb335-10" data-line-number="10"><span class="co">#&gt; 6 China        2000 213766/1280428583</span></a></code></pre></div>
<p>Table 4 is split into two tables, one table for each variable.
The table <code>table4a</code> contains the values of cases and <code>table4b</code> contains the values of population.
Within each table, each row represents a country, each column represents a year, and the cells are the value of the table’s variable for that country and year.</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" data-line-number="1">table4a</a>
<a class="sourceLine" id="cb336-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb336-3" data-line-number="3"><span class="co">#&gt;   country     `1999` `2000`</span></a>
<a class="sourceLine" id="cb336-4" data-line-number="4"><span class="co">#&gt; * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb336-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan    745   2666</span></a>
<a class="sourceLine" id="cb336-6" data-line-number="6"><span class="co">#&gt; 2 Brazil       37737  80488</span></a>
<a class="sourceLine" id="cb336-7" data-line-number="7"><span class="co">#&gt; 3 China       212258 213766</span></a></code></pre></div>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1">table4b</a>
<a class="sourceLine" id="cb337-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb337-3" data-line-number="3"><span class="co">#&gt;   country         `1999`     `2000`</span></a>
<a class="sourceLine" id="cb337-4" data-line-number="4"><span class="co">#&gt; * &lt;chr&gt;            &lt;int&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb337-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan   19987071   20595360</span></a>
<a class="sourceLine" id="cb337-6" data-line-number="6"><span class="co">#&gt; 2 Brazil       172006362  174504898</span></a>
<a class="sourceLine" id="cb337-7" data-line-number="7"><span class="co">#&gt; 3 China       1272915272 1280428583</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.2.2" class="section level3 unnumbered exercise" data-number="12.2.2">
<h3>Exercise 12.2.2<a href="#exercise-12.2.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Compute the <code>rate</code> for <code>table2</code>, and <code>table4a</code> + <code>table4b</code>.
You will need to perform four operations:</p>
<ol style="list-style-type: decimal">
<li>Extract the number of TB cases per country per year.</li>
<li>Extract the matching population per country per year.</li>
<li>Divide cases by population, and multiply by 10000.</li>
<li>Store back in the appropriate place.</li>
</ol>
<p>Which representation is easiest to work with?
Which is hardest?
Why?</p>
</div>
<div class="answer">
<p>To calculate cases per person, we need to divide cases by population for each country and year.
This is easiest if the cases and population variables are two columns in a data frame in which rows represent (country, year) combinations.</p>
<p>Table 2: First, create separate tables for cases and population and ensure that they are sorted in the same order.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb338-1" data-line-number="1">t2_cases &lt;-<span class="st"> </span><span class="kw">filter</span>(table2, type <span class="op">==</span><span class="st"> "cases"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb338-2" data-line-number="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">cases =</span> count) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb338-3" data-line-number="3"><span class="st">  </span><span class="kw">arrange</span>(country, year)</a>
<a class="sourceLine" id="cb338-4" data-line-number="4">t2_population &lt;-<span class="st"> </span><span class="kw">filter</span>(table2, type <span class="op">==</span><span class="st"> "population"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb338-5" data-line-number="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">population =</span> count) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb338-6" data-line-number="6"><span class="st">  </span><span class="kw">arrange</span>(country, year)</a></code></pre></div>
<p>Then create a new data frame with the population and cases columns, and calculate the cases per capita in a new column.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1">t2_cases_per_cap &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb339-2" data-line-number="2">  <span class="dt">year =</span> t2_cases<span class="op">$</span>year,</a>
<a class="sourceLine" id="cb339-3" data-line-number="3">  <span class="dt">country =</span> t2_cases<span class="op">$</span>country,</a>
<a class="sourceLine" id="cb339-4" data-line-number="4">  <span class="dt">cases =</span> t2_cases<span class="op">$</span>cases,</a>
<a class="sourceLine" id="cb339-5" data-line-number="5">  <span class="dt">population =</span> t2_population<span class="op">$</span>population</a>
<a class="sourceLine" id="cb339-6" data-line-number="6">) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb339-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cases_per_cap =</span> (cases <span class="op">/</span><span class="st"> </span>population) <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb339-8" data-line-number="8"><span class="st">  </span><span class="kw">select</span>(country, year, cases_per_cap)</a></code></pre></div>
<p>To store this new variable in the appropriate location, we will add new rows to <code>table2</code>.</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb340-1" data-line-number="1">t2_cases_per_cap &lt;-<span class="st"> </span>t2_cases_per_cap <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb340-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">type =</span> <span class="st">"cases_per_cap"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb340-3" data-line-number="3"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">count =</span> cases_per_cap)</a></code></pre></div>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1"><span class="kw">bind_rows</span>(table2, t2_cases_per_cap) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb341-2" data-line-number="2"><span class="st">  </span><span class="kw">arrange</span>(country, year, type, count)</a>
<a class="sourceLine" id="cb341-3" data-line-number="3"><span class="co">#&gt; # A tibble: 18 x 4</span></a>
<a class="sourceLine" id="cb341-4" data-line-number="4"><span class="co">#&gt;   country      year type                 count</span></a>
<a class="sourceLine" id="cb341-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb341-6" data-line-number="6"><span class="co">#&gt; 1 Afghanistan  1999 cases              745    </span></a>
<a class="sourceLine" id="cb341-7" data-line-number="7"><span class="co">#&gt; 2 Afghanistan  1999 cases_per_cap        0.373</span></a>
<a class="sourceLine" id="cb341-8" data-line-number="8"><span class="co">#&gt; 3 Afghanistan  1999 population    19987071    </span></a>
<a class="sourceLine" id="cb341-9" data-line-number="9"><span class="co">#&gt; 4 Afghanistan  2000 cases             2666    </span></a>
<a class="sourceLine" id="cb341-10" data-line-number="10"><span class="co">#&gt; 5 Afghanistan  2000 cases_per_cap        1.29 </span></a>
<a class="sourceLine" id="cb341-11" data-line-number="11"><span class="co">#&gt; 6 Afghanistan  2000 population    20595360    </span></a>
<a class="sourceLine" id="cb341-12" data-line-number="12"><span class="co">#&gt; # … with 12 more rows</span></a></code></pre></div>
<p>Note that after adding the <code>cases_per_cap</code> rows, the type of <code>count</code> is coerced to <code>numeric</code> (double) because <code>cases_per_cap</code> is not an integer.</p>
<p>For <code>table4a</code> and <code>table4b</code>, create a new table for cases per capita, which we’ll name <code>table4c</code>, with country rows and year columns.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" data-line-number="1">table4c &lt;-</a>
<a class="sourceLine" id="cb342-2" data-line-number="2"><span class="st">  </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb342-3" data-line-number="3">    <span class="dt">country =</span> table4a<span class="op">$</span>country,</a>
<a class="sourceLine" id="cb342-4" data-line-number="4">    <span class="st">`</span><span class="dt">1999</span><span class="st">`</span> =<span class="st"> </span>table4a[[<span class="st">"1999"</span>]] <span class="op">/</span><span class="st"> </span>table4b[[<span class="st">"1999"</span>]] <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>,</a>
<a class="sourceLine" id="cb342-5" data-line-number="5">    <span class="st">`</span><span class="dt">2000</span><span class="st">`</span> =<span class="st"> </span>table4a[[<span class="st">"2000"</span>]] <span class="op">/</span><span class="st"> </span>table4b[[<span class="st">"2000"</span>]] <span class="op">*</span><span class="st"> </span><span class="dv">10000</span></a>
<a class="sourceLine" id="cb342-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb342-7" data-line-number="7">table4c</a>
<a class="sourceLine" id="cb342-8" data-line-number="8"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb342-9" data-line-number="9"><span class="co">#&gt;   country     `1999` `2000`</span></a>
<a class="sourceLine" id="cb342-10" data-line-number="10"><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb342-11" data-line-number="11"><span class="co">#&gt; 1 Afghanistan  0.373   1.29</span></a>
<a class="sourceLine" id="cb342-12" data-line-number="12"><span class="co">#&gt; 2 Brazil       2.19    4.61</span></a>
<a class="sourceLine" id="cb342-13" data-line-number="13"><span class="co">#&gt; 3 China        1.67    1.67</span></a></code></pre></div>
<p>Neither table is particularly easy to work with.
Since <code>table2</code> has separate rows for cases and population we needed to generate a table with columns for cases and population where we could
calculate cases per capita.
<code>table4a</code> and <code>table4b</code> split the cases and population variables into different tables which
made it easy to divide cases by population.
However, we had to repeat this calculation for each row.</p>
<p>The ideal format of a data frame to answer this question is one with columns <code>country</code>, <code>year</code>, <code>cases</code>, and <code>population</code>.
Then problem could be answered with a single <code>mutate()</code> call.</p>
</div>
</div>
<div id="exercise-12.2.3" class="section level3 unnumbered exercise" data-number="12.2.3">
<h3>Exercise 12.2.3<a href="#exercise-12.2.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Recreate the plot showing change in cases over time using <code>table2</code> instead of <code>table1</code>.
What do you need to do first?</p>
</div>
<div class="answer">
<p>Before creating the plot with change in cases over time, we need to filter <code>table</code> to only include rows representing cases of TB.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1">table2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb343-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> "cases"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb343-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, count)) <span class="op">+</span></a>
<a class="sourceLine" id="cb343-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group =</span> country), <span class="dt">colour =</span> <span class="st">"grey50"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb343-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> country)) <span class="op">+</span></a>
<a class="sourceLine" id="cb343-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">unique</span>(table2<span class="op">$</span>year)) <span class="op">+</span></a>
<a class="sourceLine" id="cb343-7" data-line-number="7"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"cases"</span>)</a></code></pre></div>
<p><img src="tidy_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
</div>
</div>
<div id="pivoting" class="section level2 r4ds-section">
<h2>
<a href="#pivoting" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.3</span> Pivoting<a href="https://r4ds.had.co.nz/tidy-data.html#pivoting" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<p>This code is reproduced from the chapter because it is needed by the exercises.</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" data-line-number="1">tidy4a &lt;-<span class="st"> </span>table4a <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb344-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>), <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"cases"</span>)</a>
<a class="sourceLine" id="cb344-3" data-line-number="3">tidy4b &lt;-<span class="st"> </span>table4b <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb344-4" data-line-number="4"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>), <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"population"</span>)</a></code></pre></div>
<div id="exercise-12.3.1" class="section level3 unnumbered exercise" data-number="12.3.1">
<h3>Exercise 12.3.1<a href="#exercise-12.3.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Why are <code>pivot_longer()</code> and <code>pivot_wider()</code> not perfectly symmetrical?
Carefully consider the following example:</p>
<p>Carefully consider the following example:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb345-1" data-line-number="1">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb345-2" data-line-number="2">  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</a>
<a class="sourceLine" id="cb345-3" data-line-number="3">  <span class="dt">half  =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,     <span class="dv">1</span>,    <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb345-4" data-line-number="4">  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>)</a>
<a class="sourceLine" id="cb345-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb345-6" data-line-number="6">stocks <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb345-7" data-line-number="7"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb345-8" data-line-number="8"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>, <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"return"</span>)</a>
<a class="sourceLine" id="cb345-9" data-line-number="9"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb345-10" data-line-number="10"><span class="co">#&gt;    half year  return</span></a>
<a class="sourceLine" id="cb345-11" data-line-number="11"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb345-12" data-line-number="12"><span class="co">#&gt; 1     1 2015    1.88</span></a>
<a class="sourceLine" id="cb345-13" data-line-number="13"><span class="co">#&gt; 2     1 2016    0.92</span></a>
<a class="sourceLine" id="cb345-14" data-line-number="14"><span class="co">#&gt; 3     2 2015    0.59</span></a>
<a class="sourceLine" id="cb345-15" data-line-number="15"><span class="co">#&gt; 4     2 2016    0.17</span></a></code></pre></div>
<p>(Hint: look at the variable types and think about column names.)</p>
<p><code>pivot_longer()</code> has a <code>names_ptype</code> argument, e.g. <code>names_ptype = list(year = double())</code>. What does it do?</p>
</div>
<div class="answer">
<p>The functions <code>pivot_longer()</code> and <code>pivot_wider()</code> are not perfectly symmetrical because column type information is lost when a data frame is converted from wide to long.
The function <code>pivot_longer()</code> stacks multiple columns which may have had multiple data types into a single column with a single data type.
This transformation throws away the individual data types of the original columns.
The function <code>pivot_wider()</code> creates column names from values in column.
These column names will always be treated as <code>character</code> values by <code>pivot_longer()</code> so if the original variable used to create the column names did not have a <code>character</code> data type, then the round-trip will not reproduce the same dataset.</p>
<p>In the provided example, columns have the following data types:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" data-line-number="1"><span class="kw">glimpse</span>(stocks)</a>
<a class="sourceLine" id="cb346-2" data-line-number="2"><span class="co">#&gt; Rows: 4</span></a>
<a class="sourceLine" id="cb346-3" data-line-number="3"><span class="co">#&gt; Columns: 3</span></a>
<a class="sourceLine" id="cb346-4" data-line-number="4"><span class="co">#&gt; $ year   &lt;dbl&gt; 2015, 2015, 2016, 2016</span></a>
<a class="sourceLine" id="cb346-5" data-line-number="5"><span class="co">#&gt; $ half   &lt;dbl&gt; 1, 2, 1, 2</span></a>
<a class="sourceLine" id="cb346-6" data-line-number="6"><span class="co">#&gt; $ return &lt;dbl&gt; 1.88, 0.59, 0.92, 0.17</span></a></code></pre></div>
<p>The <code>pivot_wider()</code> expression pivots the table to create a data frame with years as column names, and the values in <code>return</code> as the column values.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1">stocks <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb347-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return) </a>
<a class="sourceLine" id="cb347-3" data-line-number="3"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb347-4" data-line-number="4"><span class="co">#&gt;    half `2015` `2016`</span></a>
<a class="sourceLine" id="cb347-5" data-line-number="5"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb347-6" data-line-number="6"><span class="co">#&gt; 1     1   1.88   0.92</span></a>
<a class="sourceLine" id="cb347-7" data-line-number="7"><span class="co">#&gt; 2     2   0.59   0.17</span></a></code></pre></div>
<p>The <code>pivot_longer()</code> expression unpivots the table, returning it to a tidy data frame with columns for <code>half</code>, <code>year</code>, and <code>return</code>.</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb348-1" data-line-number="1">stocks <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb348-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb348-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>, <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"return"</span>)</a>
<a class="sourceLine" id="cb348-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb348-5" data-line-number="5"><span class="co">#&gt;    half year  return</span></a>
<a class="sourceLine" id="cb348-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb348-7" data-line-number="7"><span class="co">#&gt; 1     1 2015    1.88</span></a>
<a class="sourceLine" id="cb348-8" data-line-number="8"><span class="co">#&gt; 2     1 2016    0.92</span></a>
<a class="sourceLine" id="cb348-9" data-line-number="9"><span class="co">#&gt; 3     2 2015    0.59</span></a>
<a class="sourceLine" id="cb348-10" data-line-number="10"><span class="co">#&gt; 4     2 2016    0.17</span></a></code></pre></div>
<p>There is one difference, in the new data frame, <code>year</code> has a data type of <code>character</code> rather than <code>numeric</code>.
The <code>names_to</code> column created from column names by <code>pivot_longer()</code> will be character by default, which is usually a safe assumption, since syntactically valid-column names can only be character values.</p>
<p>The original data types of column which <code>pivot_wider()</code> used to create the column names was not stored, so <code>pivot_longer()</code> has no idea that the column names in this case should be numeric values.
<!--
The `names_ptype` argument of `pivot_longer()` provide that information. 
Using `names_ptype = list(year = double())` informs `pivot_longer()` that the column created from column names should be a numeric vector.
Adding this argument to `pivot_longer()` in the example above will make the output of the experession the same as the original `stocks` data frame.
-->
In the current version of <code>tidyr</code>, the <code>names_ptype</code> argument does not convert the <code>year</code> column to a numeric vector, and it will raise an error.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" data-line-number="1">stocks <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb349-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb349-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>, <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"return"</span>,</a>
<a class="sourceLine" id="cb349-4" data-line-number="4">               <span class="dt">names_ptype =</span> <span class="kw">list</span>(<span class="dt">year =</span> <span class="kw">double</span>()))</a>
<a class="sourceLine" id="cb349-5" data-line-number="5"><span class="co">#&gt; Error: Can't convert &lt;character&gt; to &lt;double&gt;.</span></a></code></pre></div>
<p>Instead, use the <code>names_transform</code> argument to <code>pivot_longer()</code>, which provides a function to coerce the column to a different data type.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" data-line-number="1">stocks <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb350-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb350-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>, <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"return"</span>,</a>
<a class="sourceLine" id="cb350-4" data-line-number="4">               <span class="dt">names_transform =</span> <span class="kw">list</span>(<span class="dt">year =</span> as.numeric))</a>
<a class="sourceLine" id="cb350-5" data-line-number="5"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb350-6" data-line-number="6"><span class="co">#&gt;    half  year return</span></a>
<a class="sourceLine" id="cb350-7" data-line-number="7"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb350-8" data-line-number="8"><span class="co">#&gt; 1     1  2015   1.88</span></a>
<a class="sourceLine" id="cb350-9" data-line-number="9"><span class="co">#&gt; 2     1  2016   0.92</span></a>
<a class="sourceLine" id="cb350-10" data-line-number="10"><span class="co">#&gt; 3     2  2015   0.59</span></a>
<a class="sourceLine" id="cb350-11" data-line-number="11"><span class="co">#&gt; 4     2  2016   0.17</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.3.2" class="section level3 unnumbered exercise" data-number="12.3.2">
<h3>Exercise 12.3.2<a href="#exercise-12.3.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Why does this code fail?</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb351-1" data-line-number="1">table4a <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb351-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2000</span>), <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"cases"</span>)</a>
<a class="sourceLine" id="cb351-3" data-line-number="3"><span class="co">#&gt; Error: Can't subset columns that don't exist.</span></a>
<a class="sourceLine" id="cb351-4" data-line-number="4"><span class="co">#&gt; ✖ Locations 1999 and 2000 don't exist.</span></a>
<a class="sourceLine" id="cb351-5" data-line-number="5"><span class="co">#&gt; ℹ There are only 3 columns.</span></a></code></pre></div>
</div>
<div class="answer">
<p>The code fails because the column names <code>1999</code> and <code>2000</code> are not non-syntactic variable names.[^non-syntactic]
When selecting variables from a data frame, tidyverse functions will interpret numbers, like <code>1999</code> and <code>2000</code>, as column numbers.
In this case, <code>pivot_longer()</code> tries to select the 1999th and 2000th column of the data frame.
To select the columns <code>1999</code> and <code>2000</code>, the names must be surrounded in backticks (```) or provided as strings.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb352-1" data-line-number="1">table4a <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb352-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>), <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"cases"</span>)</a>
<a class="sourceLine" id="cb352-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb352-4" data-line-number="4"><span class="co">#&gt;   country     year   cases</span></a>
<a class="sourceLine" id="cb352-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb352-6" data-line-number="6"><span class="co">#&gt; 1 Afghanistan 1999     745</span></a>
<a class="sourceLine" id="cb352-7" data-line-number="7"><span class="co">#&gt; 2 Afghanistan 2000    2666</span></a>
<a class="sourceLine" id="cb352-8" data-line-number="8"><span class="co">#&gt; 3 Brazil      1999   37737</span></a>
<a class="sourceLine" id="cb352-9" data-line-number="9"><span class="co">#&gt; 4 Brazil      2000   80488</span></a>
<a class="sourceLine" id="cb352-10" data-line-number="10"><span class="co">#&gt; 5 China       1999  212258</span></a>
<a class="sourceLine" id="cb352-11" data-line-number="11"><span class="co">#&gt; 6 China       2000  213766</span></a></code></pre></div>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1">table4a <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="dt">names_to =</span> <span class="st">"year"</span>, <span class="dt">values_to =</span> <span class="st">"cases"</span>)</a>
<a class="sourceLine" id="cb353-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb353-4" data-line-number="4"><span class="co">#&gt;   country     year   cases</span></a>
<a class="sourceLine" id="cb353-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb353-6" data-line-number="6"><span class="co">#&gt; 1 Afghanistan 1999     745</span></a>
<a class="sourceLine" id="cb353-7" data-line-number="7"><span class="co">#&gt; 2 Afghanistan 2000    2666</span></a>
<a class="sourceLine" id="cb353-8" data-line-number="8"><span class="co">#&gt; 3 Brazil      1999   37737</span></a>
<a class="sourceLine" id="cb353-9" data-line-number="9"><span class="co">#&gt; 4 Brazil      2000   80488</span></a>
<a class="sourceLine" id="cb353-10" data-line-number="10"><span class="co">#&gt; 5 China       1999  212258</span></a>
<a class="sourceLine" id="cb353-11" data-line-number="11"><span class="co">#&gt; 6 China       2000  213766</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.3.3" class="section level3 unnumbered exercise" data-number="12.3.3">
<h3>Exercise 12.3.3<a href="#exercise-12.3.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What would happen if you widen this table?
Why?
How could you add a new column to uniquely identify each value?</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" data-line-number="1">people &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb354-2" data-line-number="2">  <span class="op">~</span>name, <span class="op">~</span>key, <span class="op">~</span>value,</a>
<a class="sourceLine" id="cb354-3" data-line-number="3">  <span class="co">#-----------------|--------|------</span></a>
<a class="sourceLine" id="cb354-4" data-line-number="4">  <span class="st">"Phillip Woods"</span>,  <span class="st">"age"</span>, <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb354-5" data-line-number="5">  <span class="st">"Phillip Woods"</span>, <span class="st">"height"</span>, <span class="dv">186</span>,</a>
<a class="sourceLine" id="cb354-6" data-line-number="6">  <span class="st">"Phillip Woods"</span>, <span class="st">"age"</span>, <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb354-7" data-line-number="7">  <span class="st">"Jessica Cordero"</span>, <span class="st">"age"</span>, <span class="dv">37</span>,</a>
<a class="sourceLine" id="cb354-8" data-line-number="8">  <span class="st">"Jessica Cordero"</span>, <span class="st">"height"</span>, <span class="dv">156</span></a>
<a class="sourceLine" id="cb354-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb354-10" data-line-number="10"><span class="kw">glimpse</span>(people)</a>
<a class="sourceLine" id="cb354-11" data-line-number="11"><span class="co">#&gt; Rows: 5</span></a>
<a class="sourceLine" id="cb354-12" data-line-number="12"><span class="co">#&gt; Columns: 3</span></a>
<a class="sourceLine" id="cb354-13" data-line-number="13"><span class="co">#&gt; $ name  &lt;chr&gt; "Phillip Woods", "Phillip Woods", "Phillip Woods", "Jessica Cor…</span></a>
<a class="sourceLine" id="cb354-14" data-line-number="14"><span class="co">#&gt; $ key   &lt;chr&gt; "age", "height", "age", "age", "height"</span></a>
<a class="sourceLine" id="cb354-15" data-line-number="15"><span class="co">#&gt; $ value &lt;dbl&gt; 45, 186, 50, 37, 156</span></a></code></pre></div>
</div>
<div class="answer">
<p>Widening this data frame using <code>pivot_wider()</code> produces columns that are lists of numeric vectors because the <code>name</code> and <code>key</code> columns do not uniquely identify rows.
In particular, there are two rows with values for the age of “Phillip Woods”.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" data-line-number="1"><span class="kw">pivot_wider</span>(people, <span class="dt">names_from=</span><span class="st">"name"</span>, <span class="dt">values_from =</span> <span class="st">"value"</span>)</a>
<a class="sourceLine" id="cb355-2" data-line-number="2"><span class="co">#&gt; Warning: Values are not uniquely identified; output will contain list-cols.</span></a>
<a class="sourceLine" id="cb355-3" data-line-number="3"><span class="co">#&gt; * Use `values_fn = list` to suppress this warning.</span></a>
<a class="sourceLine" id="cb355-4" data-line-number="4"><span class="co">#&gt; * Use `values_fn = length` to identify where the duplicates arise</span></a>
<a class="sourceLine" id="cb355-5" data-line-number="5"><span class="co">#&gt; * Use `values_fn = {summary_fun}` to summarise duplicates</span></a>
<a class="sourceLine" id="cb355-6" data-line-number="6"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb355-7" data-line-number="7"><span class="co">#&gt;   key    `Phillip Woods` `Jessica Cordero`</span></a>
<a class="sourceLine" id="cb355-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;  &lt;list&gt;          &lt;list&gt;           </span></a>
<a class="sourceLine" id="cb355-9" data-line-number="9"><span class="co">#&gt; 1 age    &lt;dbl [2]&gt;       &lt;dbl [1]&gt;        </span></a>
<a class="sourceLine" id="cb355-10" data-line-number="10"><span class="co">#&gt; 2 height &lt;dbl [1]&gt;       &lt;dbl [1]&gt;</span></a></code></pre></div>
<p>We could solve the problem by adding a row with a distinct observation count for each combination of name and key.</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb356-1" data-line-number="1">people2 &lt;-<span class="st"> </span>people <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb356-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(name, key) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb356-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">obs =</span> <span class="kw">row_number</span>())</a>
<a class="sourceLine" id="cb356-4" data-line-number="4">people2</a>
<a class="sourceLine" id="cb356-5" data-line-number="5"><span class="co">#&gt; # A tibble: 5 x 4</span></a>
<a class="sourceLine" id="cb356-6" data-line-number="6"><span class="co">#&gt; # Groups:   name, key [4]</span></a>
<a class="sourceLine" id="cb356-7" data-line-number="7"><span class="co">#&gt;   name            key    value   obs</span></a>
<a class="sourceLine" id="cb356-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb356-9" data-line-number="9"><span class="co">#&gt; 1 Phillip Woods   age       45     1</span></a>
<a class="sourceLine" id="cb356-10" data-line-number="10"><span class="co">#&gt; 2 Phillip Woods   height   186     1</span></a>
<a class="sourceLine" id="cb356-11" data-line-number="11"><span class="co">#&gt; 3 Phillip Woods   age       50     2</span></a>
<a class="sourceLine" id="cb356-12" data-line-number="12"><span class="co">#&gt; 4 Jessica Cordero age       37     1</span></a>
<a class="sourceLine" id="cb356-13" data-line-number="13"><span class="co">#&gt; 5 Jessica Cordero height   156     1</span></a></code></pre></div>
<p>We can make <code>people2</code> wider because the combination of <code>name</code> and <code>obs</code> will uniquely identify the rows in the wide data frame.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" data-line-number="1"><span class="kw">pivot_wider</span>(people2, <span class="dt">names_from=</span><span class="st">"name"</span>, <span class="dt">values_from =</span> <span class="st">"value"</span>)</a>
<a class="sourceLine" id="cb357-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 4</span></a>
<a class="sourceLine" id="cb357-3" data-line-number="3"><span class="co">#&gt; # Groups:   key [2]</span></a>
<a class="sourceLine" id="cb357-4" data-line-number="4"><span class="co">#&gt;   key      obs `Phillip Woods` `Jessica Cordero`</span></a>
<a class="sourceLine" id="cb357-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;           &lt;dbl&gt;             &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb357-6" data-line-number="6"><span class="co">#&gt; 1 age        1              45                37</span></a>
<a class="sourceLine" id="cb357-7" data-line-number="7"><span class="co">#&gt; 2 height     1             186               156</span></a>
<a class="sourceLine" id="cb357-8" data-line-number="8"><span class="co">#&gt; 3 age        2              50                NA</span></a></code></pre></div>
<p>Another way to solve this problem is by keeping only distinct rows of the name and key values, and dropping duplicate rows.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" data-line-number="1">people <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb358-2" data-line-number="2"><span class="st">  </span><span class="kw">distinct</span>(name, key, <span class="dt">.keep_all =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb358-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from=</span><span class="st">"name"</span>, <span class="dt">values_from =</span> <span class="st">"value"</span>)</a>
<a class="sourceLine" id="cb358-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb358-5" data-line-number="5"><span class="co">#&gt;   key    `Phillip Woods` `Jessica Cordero`</span></a>
<a class="sourceLine" id="cb358-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;             &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb358-7" data-line-number="7"><span class="co">#&gt; 1 age                 45                37</span></a>
<a class="sourceLine" id="cb358-8" data-line-number="8"><span class="co">#&gt; 2 height             186               156</span></a></code></pre></div>
<p>However, before doing this understand why there are duplicates in the data.
The duplicate values may not be just a nuisance, but may indicate deeper problems with the data.</p>
</div>
</div>
<div id="exercise-12.3.4" class="section level3 unnumbered exercise" data-number="12.3.4">
<h3>Exercise 12.3.4<a href="#exercise-12.3.4" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Tidy the simple tibble below. Do you need to make it wider or longer?
What are the variables?</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1">preg &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb359-2" data-line-number="2">  <span class="op">~</span>pregnant, <span class="op">~</span>male, <span class="op">~</span>female,</a>
<a class="sourceLine" id="cb359-3" data-line-number="3">  <span class="st">"yes"</span>, <span class="ot">NA</span>, <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb359-4" data-line-number="4">  <span class="st">"no"</span>, <span class="dv">20</span>, <span class="dv">12</span></a>
<a class="sourceLine" id="cb359-5" data-line-number="5">)</a></code></pre></div>
</div>
<div class="answer">
<p>To tidy the <code>preg</code> table use <code>pivot_longer()</code> to create a long table.
The variables in this data are:</p>
<ul>
<li>
<code>sex</code> (“female”, “male”)</li>
<li>
<code>pregnant</code> (“yes”, “no”)</li>
<li>
<code>count</code>, which is a non-negative integer representing the number of observations.</li>
</ul>
<p>The observations in this data are unique combinations of sex and pregnancy status.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb360-1" data-line-number="1">preg_tidy &lt;-<span class="st"> </span>preg <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb360-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(male, female), <span class="dt">names_to =</span> <span class="st">"sex"</span>, <span class="dt">values_to =</span> <span class="st">"count"</span>)</a>
<a class="sourceLine" id="cb360-3" data-line-number="3">preg_tidy</a>
<a class="sourceLine" id="cb360-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb360-5" data-line-number="5"><span class="co">#&gt;   pregnant sex    count</span></a>
<a class="sourceLine" id="cb360-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb360-7" data-line-number="7"><span class="co">#&gt; 1 yes      male      NA</span></a>
<a class="sourceLine" id="cb360-8" data-line-number="8"><span class="co">#&gt; 2 yes      female    10</span></a>
<a class="sourceLine" id="cb360-9" data-line-number="9"><span class="co">#&gt; 3 no       male      20</span></a>
<a class="sourceLine" id="cb360-10" data-line-number="10"><span class="co">#&gt; 4 no       female    12</span></a></code></pre></div>
<p>Remove the (male, pregnant) row with a missing value to simplify the tidied data frame.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1">preg_tidy2 &lt;-<span class="st"> </span>preg <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb361-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(male, female), <span class="dt">names_to =</span> <span class="st">"sex"</span>, <span class="dt">values_to =</span> <span class="st">"count"</span>, <span class="dt">values_drop_na =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb361-3" data-line-number="3">preg_tidy2</a>
<a class="sourceLine" id="cb361-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb361-5" data-line-number="5"><span class="co">#&gt;   pregnant sex    count</span></a>
<a class="sourceLine" id="cb361-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb361-7" data-line-number="7"><span class="co">#&gt; 1 yes      female    10</span></a>
<a class="sourceLine" id="cb361-8" data-line-number="8"><span class="co">#&gt; 2 no       male      20</span></a>
<a class="sourceLine" id="cb361-9" data-line-number="9"><span class="co">#&gt; 3 no       female    12</span></a></code></pre></div>
<p>This an example of turning an explicit missing value into an implicit missing value, which is discussed in the upcoming section, <a href="https://r4ds.had.co.nz/tidy-data.html#missing-values-3">Missing Values</a> section.
The missing (male, pregnant) row represents an implicit missing value because the value of <code>count</code> can be inferred from its absence.
In the tidy data, we can represent rows with missing values of <code>count</code> either explicitly with an <code>NA</code> (as in <code>preg_tidy</code>) or implicitly by the absence of a row (as in <code>preg_tidy2</code>).
But in the wide data, the missing values can only be represented explicitly.</p>
<p>Though we have already done enough to make the data tidy, there are some other transformations that can clean the data further.
If a variable takes two values, like <code>pregnant</code> and <code>sex</code>, it is often preferable to store them as logical vectors.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1">preg_tidy3 &lt;-<span class="st"> </span>preg_tidy2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb362-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb362-3" data-line-number="3">    <span class="dt">female =</span> sex <span class="op">==</span><span class="st"> "female"</span>,</a>
<a class="sourceLine" id="cb362-4" data-line-number="4">    <span class="dt">pregnant =</span> pregnant <span class="op">==</span><span class="st"> "yes"</span></a>
<a class="sourceLine" id="cb362-5" data-line-number="5">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb362-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(female, pregnant, count)</a>
<a class="sourceLine" id="cb362-7" data-line-number="7">preg_tidy3</a>
<a class="sourceLine" id="cb362-8" data-line-number="8"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb362-9" data-line-number="9"><span class="co">#&gt;   female pregnant count</span></a>
<a class="sourceLine" id="cb362-10" data-line-number="10"><span class="co">#&gt;   &lt;lgl&gt;  &lt;lgl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb362-11" data-line-number="11"><span class="co">#&gt; 1 TRUE   TRUE        10</span></a>
<a class="sourceLine" id="cb362-12" data-line-number="12"><span class="co">#&gt; 2 FALSE  FALSE       20</span></a>
<a class="sourceLine" id="cb362-13" data-line-number="13"><span class="co">#&gt; 3 TRUE   FALSE       12</span></a></code></pre></div>
<p>In the previous data frame, I named the logical variable representing the sex <code>female</code>, not <code>sex</code>.
This makes the meaning of the variable self-documenting.
If the variable were named <code>sex</code> with values <code>TRUE</code> and <code>FALSE</code>, without reading the documentation, we wouldn’t know whether <code>TRUE</code> means male or female.</p>
<p>Apart from some minor memory savings, representing these variables as logical vectors results in more clear and concise code.
Compare the <code>filter()</code> calls to select non-pregnant females from <code>preg_tidy2</code> and <code>preg_tidy</code>.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1"><span class="kw">filter</span>(preg_tidy2, sex <span class="op">==</span><span class="st"> "female"</span>, pregnant <span class="op">==</span><span class="st"> "no"</span>)</a>
<a class="sourceLine" id="cb363-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb363-3" data-line-number="3"><span class="co">#&gt;   pregnant sex    count</span></a>
<a class="sourceLine" id="cb363-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb363-5" data-line-number="5"><span class="co">#&gt; 1 no       female    12</span></a>
<a class="sourceLine" id="cb363-6" data-line-number="6"><span class="kw">filter</span>(preg_tidy3, female, <span class="op">!</span>pregnant)</a>
<a class="sourceLine" id="cb363-7" data-line-number="7"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb363-8" data-line-number="8"><span class="co">#&gt;   female pregnant count</span></a>
<a class="sourceLine" id="cb363-9" data-line-number="9"><span class="co">#&gt;   &lt;lgl&gt;  &lt;lgl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb363-10" data-line-number="10"><span class="co">#&gt; 1 TRUE   FALSE       12</span></a></code></pre></div>
</div>
</div>
</div>
<div id="separating-and-uniting" class="section level2 r4ds-section">
<h2>
<a href="#separating-and-uniting" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.4</span> Separating and uniting<a href="https://r4ds.had.co.nz/tidy-data.html#separating-and-uniting" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-12.4.1" class="section level3 unnumbered exercise" data-number="12.4.1">
<h3>Exercise 12.4.1<a href="#exercise-12.4.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What do the extra and fill arguments do in <code>separate()</code>?
Experiment with the various options for the following two toy datasets.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb364-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>))</a>
<a class="sourceLine" id="cb364-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Additional pieces discarded in 1 rows [2].</span></a>
<a class="sourceLine" id="cb364-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb364-5" data-line-number="5"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb364-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb364-7" data-line-number="7"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb364-8" data-line-number="8"><span class="co">#&gt; 2 d     e     f    </span></a>
<a class="sourceLine" id="cb364-9" data-line-number="9"><span class="co">#&gt; 3 h     i     j</span></a>
<a class="sourceLine" id="cb364-10" data-line-number="10"></a>
<a class="sourceLine" id="cb364-11" data-line-number="11"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb364-12" data-line-number="12"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>))</a>
<a class="sourceLine" id="cb364-13" data-line-number="13"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 1 rows [2].</span></a>
<a class="sourceLine" id="cb364-14" data-line-number="14"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb364-15" data-line-number="15"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb364-16" data-line-number="16"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb364-17" data-line-number="17"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb364-18" data-line-number="18"><span class="co">#&gt; 2 d     e     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb364-19" data-line-number="19"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
</div>
<div class="answer">
<p>The <code>extra</code> argument tells <code>separate()</code> what to do if there are too many pieces, and the <code>fill</code> argument tells it what to do if there aren’t enough.
By default, <code>separate()</code> drops extra values with a warning.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb365-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>))</a>
<a class="sourceLine" id="cb365-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Additional pieces discarded in 1 rows [2].</span></a>
<a class="sourceLine" id="cb365-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb365-5" data-line-number="5"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb365-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb365-7" data-line-number="7"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb365-8" data-line-number="8"><span class="co">#&gt; 2 d     e     f    </span></a>
<a class="sourceLine" id="cb365-9" data-line-number="9"><span class="co">#&gt; 3 h     i     j</span></a></code></pre></div>
<p>Adding the argument, <code>extra = "drop"</code>, produces the same result as above but without the warning.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb366-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="dt">extra =</span> <span class="st">"drop"</span>)</a>
<a class="sourceLine" id="cb366-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb366-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb366-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb366-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb366-7" data-line-number="7"><span class="co">#&gt; 2 d     e     f    </span></a>
<a class="sourceLine" id="cb366-8" data-line-number="8"><span class="co">#&gt; 3 h     i     j</span></a></code></pre></div>
<p>Setting <code>extra = "merge"</code>, then the extra values are not split, so <code>"f,g"</code> appears in column three.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb367-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="dt">extra =</span> <span class="st">"merge"</span>)</a>
<a class="sourceLine" id="cb367-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb367-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb367-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb367-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb367-7" data-line-number="7"><span class="co">#&gt; 2 d     e     f,g  </span></a>
<a class="sourceLine" id="cb367-8" data-line-number="8"><span class="co">#&gt; 3 h     i     j</span></a></code></pre></div>
<p>In this example, one of the values, <code>"d,e"</code>, has too few elements.
The default for <code>fill</code> is similar to those in <code>separate()</code>;
it fills columns with missing values but emits a warning.
In this example, the 2nd row of column <code>three</code> is <code>NA</code>.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb368-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>))</a>
<a class="sourceLine" id="cb368-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 1 rows [2].</span></a>
<a class="sourceLine" id="cb368-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb368-5" data-line-number="5"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb368-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb368-7" data-line-number="7"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb368-8" data-line-number="8"><span class="co">#&gt; 2 d     e     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb368-9" data-line-number="9"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
<p>Alternative options for the <code>fill</code> are <code>"right"</code>, to fill with missing values from the right, but without a warning</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb369-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="dt">fill =</span> <span class="st">"right"</span>)</a>
<a class="sourceLine" id="cb369-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb369-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb369-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb369-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb369-7" data-line-number="7"><span class="co">#&gt; 2 d     e     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb369-8" data-line-number="8"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
<p>The option <code>fill = "left"</code> also fills with missing values without emitting a warning, but this time from the left side.
Now, the 2nd row of column <code>one</code> will be missing, and the other values in that row are shifted right.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb370-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="dt">fill =</span> <span class="st">"left"</span>)</a>
<a class="sourceLine" id="cb370-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb370-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb370-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb370-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb370-7" data-line-number="7"><span class="co">#&gt; 2 &lt;NA&gt;  d     e    </span></a>
<a class="sourceLine" id="cb370-8" data-line-number="8"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.4.2" class="section level3 unnumbered exercise" data-number="12.4.2">
<h3>Exercise 12.4.2<a href="#exercise-12.4.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Both <code>unite()</code> and <code>separate()</code> have a <code>remove</code> argument.
What does it do?
Why would you set it to <code>FALSE</code>?</p>
</div>
<div class="answer">
<p>The <code>remove</code> argument discards input columns in the result data frame. You would set it to <code>FALSE</code> if you want to create a new variable, but keep the old one.</p>
</div>
</div>
<div id="exercise-12.4.3" class="section level3 unnumbered exercise" data-number="12.4.3">
<h3>Exercise 12.4.3<a href="#exercise-12.4.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Compare and contrast <code>separate()</code> and <code>extract()</code>, Why are there three variations of separation (by position, by separator, and with groups), but only one unite?</p>
</div>
<div class="answer">
<p>The function <code>separate()</code>, splits a column into multiple columns by separator, if the <code>sep</code> argument is a character vector, or by character positions, if <code>sep</code> is numeric.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" data-line-number="1"><span class="co"># example with separators</span></a>
<a class="sourceLine" id="cb371-2" data-line-number="2"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"X_1"</span>, <span class="st">"X_2"</span>, <span class="st">"AA_1"</span>, <span class="st">"AA_2"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb371-3" data-line-number="3"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"variable"</span>, <span class="st">"into"</span>), <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb371-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb371-5" data-line-number="5"><span class="co">#&gt;   variable into </span></a>
<a class="sourceLine" id="cb371-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb371-7" data-line-number="7"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb371-8" data-line-number="8"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb371-9" data-line-number="9"><span class="co">#&gt; 3 AA       1    </span></a>
<a class="sourceLine" id="cb371-10" data-line-number="10"><span class="co">#&gt; 4 AA       2</span></a>
<a class="sourceLine" id="cb371-11" data-line-number="11"></a>
<a class="sourceLine" id="cb371-12" data-line-number="12"><span class="co"># example with position</span></a>
<a class="sourceLine" id="cb371-13" data-line-number="13"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"Y1"</span>, <span class="st">"Y2"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb371-14" data-line-number="14"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">"variable"</span>, <span class="st">"into"</span>), <span class="dt">sep =</span> <span class="kw">c</span>(<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb371-15" data-line-number="15"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb371-16" data-line-number="16"><span class="co">#&gt;   variable into </span></a>
<a class="sourceLine" id="cb371-17" data-line-number="17"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb371-18" data-line-number="18"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb371-19" data-line-number="19"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb371-20" data-line-number="20"><span class="co">#&gt; 3 Y        1    </span></a>
<a class="sourceLine" id="cb371-21" data-line-number="21"><span class="co">#&gt; 4 Y        2</span></a></code></pre></div>
<p>The function <code>extract()</code> uses a regular expression to specify groups in character vector and split that single character vector into multiple columns.
This is more flexible than <code>separate()</code> because it does not require a common
separator or specific column positions.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1"><span class="co"># example with separators</span></a>
<a class="sourceLine" id="cb372-2" data-line-number="2"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"X_1"</span>, <span class="st">"X_2"</span>, <span class="st">"AA_1"</span>, <span class="st">"AA_2"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb372-3" data-line-number="3"><span class="st">  </span><span class="kw">extract</span>(x, <span class="kw">c</span>(<span class="st">"variable"</span>, <span class="st">"id"</span>), <span class="dt">regex =</span> <span class="st">"([A-Z])_([0-9])"</span>)</a>
<a class="sourceLine" id="cb372-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb372-5" data-line-number="5"><span class="co">#&gt;   variable id   </span></a>
<a class="sourceLine" id="cb372-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb372-7" data-line-number="7"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb372-8" data-line-number="8"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb372-9" data-line-number="9"><span class="co">#&gt; 3 A        1    </span></a>
<a class="sourceLine" id="cb372-10" data-line-number="10"><span class="co">#&gt; 4 A        2</span></a>
<a class="sourceLine" id="cb372-11" data-line-number="11"></a>
<a class="sourceLine" id="cb372-12" data-line-number="12"><span class="co"># example with position</span></a>
<a class="sourceLine" id="cb372-13" data-line-number="13"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"Y1"</span>, <span class="st">"Y2"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb372-14" data-line-number="14"><span class="st">  </span><span class="kw">extract</span>(x, <span class="kw">c</span>(<span class="st">"variable"</span>, <span class="st">"id"</span>), <span class="dt">regex =</span> <span class="st">"([A-Z])([0-9])"</span>)</a>
<a class="sourceLine" id="cb372-15" data-line-number="15"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb372-16" data-line-number="16"><span class="co">#&gt;   variable id   </span></a>
<a class="sourceLine" id="cb372-17" data-line-number="17"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb372-18" data-line-number="18"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb372-19" data-line-number="19"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb372-20" data-line-number="20"><span class="co">#&gt; 3 Y        1    </span></a>
<a class="sourceLine" id="cb372-21" data-line-number="21"><span class="co">#&gt; 4 Y        2</span></a>
<a class="sourceLine" id="cb372-22" data-line-number="22"></a>
<a class="sourceLine" id="cb372-23" data-line-number="23"><span class="co"># example that separate could not parse</span></a>
<a class="sourceLine" id="cb372-24" data-line-number="24"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">"X1"</span>, <span class="st">"X20"</span>, <span class="st">"AA11"</span>, <span class="st">"AA2"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb372-25" data-line-number="25"><span class="st">  </span><span class="kw">extract</span>(x, <span class="kw">c</span>(<span class="st">"variable"</span>, <span class="st">"id"</span>), <span class="dt">regex =</span> <span class="st">"([A-Z]+)([0-9]+)"</span>)</a>
<a class="sourceLine" id="cb372-26" data-line-number="26"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb372-27" data-line-number="27"><span class="co">#&gt;   variable id   </span></a>
<a class="sourceLine" id="cb372-28" data-line-number="28"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb372-29" data-line-number="29"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb372-30" data-line-number="30"><span class="co">#&gt; 2 X        20   </span></a>
<a class="sourceLine" id="cb372-31" data-line-number="31"><span class="co">#&gt; 3 AA       11   </span></a>
<a class="sourceLine" id="cb372-32" data-line-number="32"><span class="co">#&gt; 4 AA       2</span></a></code></pre></div>
<p>Both <code>separate()</code> and <code>extract()</code> convert a single column to many columns.
However, <code>unite()</code> converts many columns to one, with a choice of a separator to include between column values.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">variable =</span> <span class="kw">c</span>(<span class="st">"X"</span>, <span class="st">"X"</span>, <span class="st">"Y"</span>, <span class="st">"Y"</span>), <span class="dt">id =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb373-2" data-line-number="2"><span class="st">  </span><span class="kw">unite</span>(x, variable, id, <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb373-3" data-line-number="3"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb373-4" data-line-number="4"><span class="co">#&gt;   x    </span></a>
<a class="sourceLine" id="cb373-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb373-6" data-line-number="6"><span class="co">#&gt; 1 X_1  </span></a>
<a class="sourceLine" id="cb373-7" data-line-number="7"><span class="co">#&gt; 2 X_2  </span></a>
<a class="sourceLine" id="cb373-8" data-line-number="8"><span class="co">#&gt; 3 Y_1  </span></a>
<a class="sourceLine" id="cb373-9" data-line-number="9"><span class="co">#&gt; 4 Y_2</span></a></code></pre></div>
<p>In other words, with <code>extract()</code> and <code>separate()</code> only one column can be chosen,
but there are many choices how to split that single column into different columns.
With <code>unite()</code>, there are many choices as to which columns to include, but only one
choice as to how to combine their contents into a single vector.</p>
</div>
</div>
</div>
<div id="missing-values-3" class="section level2 r4ds-section">
<h2>
<a href="#missing-values-3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.5</span> Missing values<a href="https://r4ds.had.co.nz/tidy-data.html#missing-values-3" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-12.5.1" class="section level3 unnumbered exercise" data-number="12.5.1">
<h3>Exercise 12.5.1<a href="#exercise-12.5.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Compare and contrast the <code>fill</code> arguments to <code>pivot_wider()</code> and <code>complete()</code>.</p>
</div>
<div class="answer">
<p>The <code>values_fill</code> argument in <code>pivot_wider()</code> and the <code>fill</code> argument to <code>complete()</code> both set vales to replace <code>NA</code>.
Both arguments accept named lists to set values for each column.
Additionally, the <code>values_fill</code> argument of <code>pivot_wider()</code> accepts a single value.
In <code>complete()</code>, the fill argument also sets a value to replace <code>NA</code>s but it is named list, allowing for different values for different variables.
Also, both cases replace both implicit and explicit missing values.</p>
<p>For example, this will fill in the missing values of the long data frame with <code>0</code> <code>complete()</code>:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb374-1" data-line-number="1">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb374-2" data-line-number="2">  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</a>
<a class="sourceLine" id="cb374-3" data-line-number="3">  <span class="dt">qtr    =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb374-4" data-line-number="4">  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.35</span>,   <span class="ot">NA</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>, <span class="fl">2.66</span>)</a>
<a class="sourceLine" id="cb374-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb374-6" data-line-number="6">stocks <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb374-7" data-line-number="7"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return,</a>
<a class="sourceLine" id="cb374-8" data-line-number="8">              <span class="dt">values_fill =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb374-9" data-line-number="9"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb374-10" data-line-number="10"><span class="co">#&gt;     qtr `2015` `2016`</span></a>
<a class="sourceLine" id="cb374-11" data-line-number="11"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb374-12" data-line-number="12"><span class="co">#&gt; 1     1   1.88   0   </span></a>
<a class="sourceLine" id="cb374-13" data-line-number="13"><span class="co">#&gt; 2     2   0.59   0.92</span></a>
<a class="sourceLine" id="cb374-14" data-line-number="14"><span class="co">#&gt; 3     3   0.35   0.17</span></a>
<a class="sourceLine" id="cb374-15" data-line-number="15"><span class="co">#&gt; 4     4  NA      2.66</span></a></code></pre></div>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb375-2" data-line-number="2">  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</a>
<a class="sourceLine" id="cb375-3" data-line-number="3">  <span class="dt">qtr    =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb375-4" data-line-number="4">  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.35</span>,   <span class="ot">NA</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>, <span class="fl">2.66</span>)</a>
<a class="sourceLine" id="cb375-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb375-6" data-line-number="6">stocks <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb375-7" data-line-number="7"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> return,</a>
<a class="sourceLine" id="cb375-8" data-line-number="8">              <span class="dt">values_fill =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb375-9" data-line-number="9"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb375-10" data-line-number="10"><span class="co">#&gt;     qtr `2015` `2016`</span></a>
<a class="sourceLine" id="cb375-11" data-line-number="11"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb375-12" data-line-number="12"><span class="co">#&gt; 1     1   1.88   0   </span></a>
<a class="sourceLine" id="cb375-13" data-line-number="13"><span class="co">#&gt; 2     2   0.59   0.92</span></a>
<a class="sourceLine" id="cb375-14" data-line-number="14"><span class="co">#&gt; 3     3   0.35   0.17</span></a>
<a class="sourceLine" id="cb375-15" data-line-number="15"><span class="co">#&gt; 4     4  NA      2.66</span></a></code></pre></div>
<p>For example, this will fill in the missing values of the long data frame with <code>0</code> <code>complete()</code>:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1">stocks <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb376-2" data-line-number="2"><span class="st"> </span><span class="kw">complete</span>(year, qtr, <span class="dt">fill=</span><span class="kw">list</span>(<span class="dt">return=</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb376-3" data-line-number="3"><span class="co">#&gt; # A tibble: 8 x 3</span></a>
<a class="sourceLine" id="cb376-4" data-line-number="4"><span class="co">#&gt;    year   qtr return</span></a>
<a class="sourceLine" id="cb376-5" data-line-number="5"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb376-6" data-line-number="6"><span class="co">#&gt; 1  2015     1   1.88</span></a>
<a class="sourceLine" id="cb376-7" data-line-number="7"><span class="co">#&gt; 2  2015     2   0.59</span></a>
<a class="sourceLine" id="cb376-8" data-line-number="8"><span class="co">#&gt; 3  2015     3   0.35</span></a>
<a class="sourceLine" id="cb376-9" data-line-number="9"><span class="co">#&gt; 4  2015     4   0   </span></a>
<a class="sourceLine" id="cb376-10" data-line-number="10"><span class="co">#&gt; 5  2016     1   0   </span></a>
<a class="sourceLine" id="cb376-11" data-line-number="11"><span class="co">#&gt; 6  2016     2   0.92</span></a>
<a class="sourceLine" id="cb376-12" data-line-number="12"><span class="co">#&gt; # … with 2 more rows</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.5.2" class="section level3 unnumbered exercise" data-number="12.5.2">
<h3>Exercise 12.5.2<a href="#exercise-12.5.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What does the <code>direction</code> argument to <code>fill()</code> do?</p>
</div>
<div class="answer">
<p>With <code>fill</code>, the <code>direction</code> determines whether <code>NA</code> values should be replaced by the previous non-missing value (<code>"down"</code>) or the next non-missing value (<code>"up"</code>).</p>
</div>
</div>
</div>
<div id="case-study" class="section level2 r4ds-section">
<h2>
<a href="#case-study" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.6</span> Case Study<a href="https://r4ds.had.co.nz/tidy-data.html#case-study" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<p>This code is repeated from the chapter because it is needed by the exercises.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" data-line-number="1">who1 &lt;-<span class="st"> </span>who <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb377-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(</a>
<a class="sourceLine" id="cb377-3" data-line-number="3">    <span class="dt">cols =</span> new_sp_m014<span class="op">:</span>newrel_f65, </a>
<a class="sourceLine" id="cb377-4" data-line-number="4">    <span class="dt">names_to =</span> <span class="st">"key"</span>, </a>
<a class="sourceLine" id="cb377-5" data-line-number="5">    <span class="dt">values_to =</span> <span class="st">"cases"</span>, </a>
<a class="sourceLine" id="cb377-6" data-line-number="6">    <span class="dt">values_drop_na =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb377-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb377-8" data-line-number="8">who1</a>
<a class="sourceLine" id="cb377-9" data-line-number="9"><span class="co">#&gt; # A tibble: 76,046 x 6</span></a>
<a class="sourceLine" id="cb377-10" data-line-number="10"><span class="co">#&gt;   country     iso2  iso3   year key          cases</span></a>
<a class="sourceLine" id="cb377-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;        &lt;int&gt;</span></a>
<a class="sourceLine" id="cb377-12" data-line-number="12"><span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new_sp_m014      0</span></a>
<a class="sourceLine" id="cb377-13" data-line-number="13"><span class="co">#&gt; 2 Afghanistan AF    AFG    1997 new_sp_m1524    10</span></a>
<a class="sourceLine" id="cb377-14" data-line-number="14"><span class="co">#&gt; 3 Afghanistan AF    AFG    1997 new_sp_m2534     6</span></a>
<a class="sourceLine" id="cb377-15" data-line-number="15"><span class="co">#&gt; 4 Afghanistan AF    AFG    1997 new_sp_m3544     3</span></a>
<a class="sourceLine" id="cb377-16" data-line-number="16"><span class="co">#&gt; 5 Afghanistan AF    AFG    1997 new_sp_m4554     5</span></a>
<a class="sourceLine" id="cb377-17" data-line-number="17"><span class="co">#&gt; 6 Afghanistan AF    AFG    1997 new_sp_m5564     2</span></a>
<a class="sourceLine" id="cb377-18" data-line-number="18"><span class="co">#&gt; # … with 76,040 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb378-1" data-line-number="1">who2 &lt;-<span class="st"> </span>who1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb378-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">names_from =</span> stringr<span class="op">::</span><span class="kw">str_replace</span>(key, <span class="st">"newrel"</span>, <span class="st">"new_rel"</span>))</a>
<a class="sourceLine" id="cb378-3" data-line-number="3">who2</a>
<a class="sourceLine" id="cb378-4" data-line-number="4"><span class="co">#&gt; # A tibble: 76,046 x 7</span></a>
<a class="sourceLine" id="cb378-5" data-line-number="5"><span class="co">#&gt;   country     iso2  iso3   year key          cases names_from  </span></a>
<a class="sourceLine" id="cb378-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;        &lt;int&gt; &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb378-7" data-line-number="7"><span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new_sp_m014      0 new_sp_m014 </span></a>
<a class="sourceLine" id="cb378-8" data-line-number="8"><span class="co">#&gt; 2 Afghanistan AF    AFG    1997 new_sp_m1524    10 new_sp_m1524</span></a>
<a class="sourceLine" id="cb378-9" data-line-number="9"><span class="co">#&gt; 3 Afghanistan AF    AFG    1997 new_sp_m2534     6 new_sp_m2534</span></a>
<a class="sourceLine" id="cb378-10" data-line-number="10"><span class="co">#&gt; 4 Afghanistan AF    AFG    1997 new_sp_m3544     3 new_sp_m3544</span></a>
<a class="sourceLine" id="cb378-11" data-line-number="11"><span class="co">#&gt; 5 Afghanistan AF    AFG    1997 new_sp_m4554     5 new_sp_m4554</span></a>
<a class="sourceLine" id="cb378-12" data-line-number="12"><span class="co">#&gt; 6 Afghanistan AF    AFG    1997 new_sp_m5564     2 new_sp_m5564</span></a>
<a class="sourceLine" id="cb378-13" data-line-number="13"><span class="co">#&gt; # … with 76,040 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" data-line-number="1">who3 &lt;-<span class="st"> </span>who2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb379-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">"new"</span>, <span class="st">"type"</span>, <span class="st">"sexage"</span>), <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb379-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2580 rows [243,</span></a>
<a class="sourceLine" id="cb379-4" data-line-number="4"><span class="co">#&gt; 244, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 903,</span></a>
<a class="sourceLine" id="cb379-5" data-line-number="5"><span class="co">#&gt; 904, 905, 906, ...].</span></a>
<a class="sourceLine" id="cb379-6" data-line-number="6">who3</a>
<a class="sourceLine" id="cb379-7" data-line-number="7"><span class="co">#&gt; # A tibble: 76,046 x 9</span></a>
<a class="sourceLine" id="cb379-8" data-line-number="8"><span class="co">#&gt;   country     iso2  iso3   year new   type  sexage cases names_from  </span></a>
<a class="sourceLine" id="cb379-9" data-line-number="9"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb379-10" data-line-number="10"><span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new   sp    m014       0 new_sp_m014 </span></a>
<a class="sourceLine" id="cb379-11" data-line-number="11"><span class="co">#&gt; 2 Afghanistan AF    AFG    1997 new   sp    m1524     10 new_sp_m1524</span></a>
<a class="sourceLine" id="cb379-12" data-line-number="12"><span class="co">#&gt; 3 Afghanistan AF    AFG    1997 new   sp    m2534      6 new_sp_m2534</span></a>
<a class="sourceLine" id="cb379-13" data-line-number="13"><span class="co">#&gt; 4 Afghanistan AF    AFG    1997 new   sp    m3544      3 new_sp_m3544</span></a>
<a class="sourceLine" id="cb379-14" data-line-number="14"><span class="co">#&gt; 5 Afghanistan AF    AFG    1997 new   sp    m4554      5 new_sp_m4554</span></a>
<a class="sourceLine" id="cb379-15" data-line-number="15"><span class="co">#&gt; 6 Afghanistan AF    AFG    1997 new   sp    m5564      2 new_sp_m5564</span></a>
<a class="sourceLine" id="cb379-16" data-line-number="16"><span class="co">#&gt; # … with 76,040 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb380-1" data-line-number="1">who3 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb380-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(new)</a>
<a class="sourceLine" id="cb380-3" data-line-number="3"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb380-4" data-line-number="4"><span class="co">#&gt;   new        n</span></a>
<a class="sourceLine" id="cb380-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb380-6" data-line-number="6"><span class="co">#&gt; 1 new    73466</span></a>
<a class="sourceLine" id="cb380-7" data-line-number="7"><span class="co">#&gt; 2 newrel  2580</span></a></code></pre></div>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" data-line-number="1">who4 &lt;-<span class="st"> </span>who3 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb381-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>new, <span class="op">-</span>iso2, <span class="op">-</span>iso3)</a></code></pre></div>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb382-1" data-line-number="1">who5 &lt;-<span class="st"> </span>who4 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb382-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(sexage, <span class="kw">c</span>(<span class="st">"sex"</span>, <span class="st">"age"</span>), <span class="dt">sep =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb382-3" data-line-number="3">who5</a>
<a class="sourceLine" id="cb382-4" data-line-number="4"><span class="co">#&gt; # A tibble: 76,046 x 7</span></a>
<a class="sourceLine" id="cb382-5" data-line-number="5"><span class="co">#&gt;   country      year type  sex   age   cases names_from  </span></a>
<a class="sourceLine" id="cb382-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb382-7" data-line-number="7"><span class="co">#&gt; 1 Afghanistan  1997 sp    m     014       0 new_sp_m014 </span></a>
<a class="sourceLine" id="cb382-8" data-line-number="8"><span class="co">#&gt; 2 Afghanistan  1997 sp    m     1524     10 new_sp_m1524</span></a>
<a class="sourceLine" id="cb382-9" data-line-number="9"><span class="co">#&gt; 3 Afghanistan  1997 sp    m     2534      6 new_sp_m2534</span></a>
<a class="sourceLine" id="cb382-10" data-line-number="10"><span class="co">#&gt; 4 Afghanistan  1997 sp    m     3544      3 new_sp_m3544</span></a>
<a class="sourceLine" id="cb382-11" data-line-number="11"><span class="co">#&gt; 5 Afghanistan  1997 sp    m     4554      5 new_sp_m4554</span></a>
<a class="sourceLine" id="cb382-12" data-line-number="12"><span class="co">#&gt; 6 Afghanistan  1997 sp    m     5564      2 new_sp_m5564</span></a>
<a class="sourceLine" id="cb382-13" data-line-number="13"><span class="co">#&gt; # … with 76,040 more rows</span></a></code></pre></div>
<div id="exercise-12.6.1" class="section level3 unnumbered exercise" data-number="12.6.1">
<h3>Exercise 12.6.1<a href="#exercise-12.6.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>In this case study, I set <code>na.rm = TRUE</code> just to make it easier to check that we had the correct values.
Is this reasonable?
Think about how missing values are represented in this dataset.
Are there implicit missing values?
What’s the difference between an <code>NA</code> and zero?</p>
</div>
<div class="answer">
<p>The reasonableness of using <code>na.rm = TRUE</code> depends on how missing values are represented in this dataset.
The main concern is whether a missing value means that there were no cases of TB or whether it means that the WHO does not have data on the number of TB cases.
Here are some things we should look for to help distinguish between these cases.</p>
<ul>
<li><p>If there are no 0 values in the data, then missing values may be used to indicate no cases.</p></li>
<li><p>If there are both explicit and implicit missing values, then it suggests that missing values
are being used differently. In that case, it is likely that explicit missing values would
mean no cases, and implicit missing values would mean no data on the number of cases.</p></li>
</ul>
<p>First, I’ll check for the presence of zeros in the data.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1">who1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb383-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(cases <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb383-3" data-line-number="3"><span class="st">  </span><span class="kw">nrow</span>()</a>
<a class="sourceLine" id="cb383-4" data-line-number="4"><span class="co">#&gt; [1] 11080</span></a></code></pre></div>
<p>There are zeros in the data, so it appears that cases of zero TB are explicitly indicated, and the value of<code>NA</code> is used to indicate missing data.</p>
<p>Second, I should check whether all values for a (country, year) are missing or whether it is possible for only some columns to be missing.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb384-1" data-line-number="1"><span class="kw">pivot_longer</span>(who, <span class="kw">c</span>(new_sp_m014<span class="op">:</span>newrel_f65), <span class="dt">names_to =</span> <span class="st">"key"</span>, <span class="dt">values_to =</span> <span class="st">"cases"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb384-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(country, year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb384-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(cases)) <span class="op">/</span><span class="st"> </span><span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb384-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(prop_missing <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, prop_missing <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb384-5" data-line-number="5"><span class="co">#&gt; # A tibble: 195,104 x 7</span></a>
<a class="sourceLine" id="cb384-6" data-line-number="6"><span class="co">#&gt; # Groups:   country, year [3,484]</span></a>
<a class="sourceLine" id="cb384-7" data-line-number="7"><span class="co">#&gt;   country     iso2  iso3   year key          cases prop_missing</span></a>
<a class="sourceLine" id="cb384-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;        &lt;int&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb384-9" data-line-number="9"><span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new_sp_m014      0         0.75</span></a>
<a class="sourceLine" id="cb384-10" data-line-number="10"><span class="co">#&gt; 2 Afghanistan AF    AFG    1997 new_sp_m1524    10         0.75</span></a>
<a class="sourceLine" id="cb384-11" data-line-number="11"><span class="co">#&gt; 3 Afghanistan AF    AFG    1997 new_sp_m2534     6         0.75</span></a>
<a class="sourceLine" id="cb384-12" data-line-number="12"><span class="co">#&gt; 4 Afghanistan AF    AFG    1997 new_sp_m3544     3         0.75</span></a>
<a class="sourceLine" id="cb384-13" data-line-number="13"><span class="co">#&gt; 5 Afghanistan AF    AFG    1997 new_sp_m4554     5         0.75</span></a>
<a class="sourceLine" id="cb384-14" data-line-number="14"><span class="co">#&gt; 6 Afghanistan AF    AFG    1997 new_sp_m5564     2         0.75</span></a>
<a class="sourceLine" id="cb384-15" data-line-number="15"><span class="co">#&gt; # … with 195,098 more rows</span></a></code></pre></div>
<p>From the results above, it looks like it is possible for a (country, year) row to contain some, but not all, missing values in its columns.</p>
<p>Finally, I will check for implicit missing values.
Implicit missing values are (<code>year</code>, <code>country</code>) combinations that do not appear in the data.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1"><span class="kw">nrow</span>(who)</a>
<a class="sourceLine" id="cb385-2" data-line-number="2"><span class="co">#&gt; [1] 7240</span></a>
<a class="sourceLine" id="cb385-3" data-line-number="3"></a>
<a class="sourceLine" id="cb385-4" data-line-number="4">who <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb385-5" data-line-number="5"><span class="st">  </span><span class="kw">complete</span>(country, year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb385-6" data-line-number="6"><span class="st">  </span><span class="kw">nrow</span>()</a>
<a class="sourceLine" id="cb385-7" data-line-number="7"><span class="co">#&gt; [1] 7446</span></a></code></pre></div>
<p>Since the number of complete cases of (<code>country</code>, <code>year</code>) is greater than the number of rows in <code>who</code>, there are some implicit values.
But that doesn’t tell us what those implicit missing values are.
To do this, I will use the <code>anti_join()</code> function introduced in the later <a href="https://r4ds.had.co.nz/relational-data.html#filtering-joins">Relational Data</a> chapter.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1"><span class="kw">anti_join</span>(<span class="kw">complete</span>(who, country, year), who, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb386-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(country, year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb386-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb386-4" data-line-number="4"><span class="st">  </span><span class="co"># so I can make better sense of the years</span></a>
<a class="sourceLine" id="cb386-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">min_year =</span> <span class="kw">min</span>(year), <span class="dt">max_year =</span> <span class="kw">max</span>(year))</a>
<a class="sourceLine" id="cb386-6" data-line-number="6"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb386-7" data-line-number="7"><span class="co">#&gt; # A tibble: 9 x 3</span></a>
<a class="sourceLine" id="cb386-8" data-line-number="8"><span class="co">#&gt;   country                           min_year max_year</span></a>
<a class="sourceLine" id="cb386-9" data-line-number="9"><span class="co">#&gt;   &lt;chr&gt;                                &lt;int&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb386-10" data-line-number="10"><span class="co">#&gt; 1 Bonaire, Saint Eustatius and Saba     1980     2009</span></a>
<a class="sourceLine" id="cb386-11" data-line-number="11"><span class="co">#&gt; 2 Curacao                               1980     2009</span></a>
<a class="sourceLine" id="cb386-12" data-line-number="12"><span class="co">#&gt; 3 Montenegro                            1980     2004</span></a>
<a class="sourceLine" id="cb386-13" data-line-number="13"><span class="co">#&gt; 4 Netherlands Antilles                  2010     2013</span></a>
<a class="sourceLine" id="cb386-14" data-line-number="14"><span class="co">#&gt; 5 Serbia                                1980     2004</span></a>
<a class="sourceLine" id="cb386-15" data-line-number="15"><span class="co">#&gt; 6 Serbia &amp; Montenegro                   2005     2013</span></a>
<a class="sourceLine" id="cb386-16" data-line-number="16"><span class="co">#&gt; # … with 3 more rows</span></a></code></pre></div>
<p>All of these refer to (<code>country</code>, <code>year</code>) combinations for years prior to the existence of the country.
For example, Timor-Leste achieved independence in 2002, so years prior to that are not included in the data.</p>
<p>To summarize:</p>
<ul>
<li>
<code>0</code> is used to represent no cases of TB.</li>
<li>Explicit missing values (<code>NA</code>s) are used to represent missing data for (<code>country</code>, <code>year</code>) combinations in which the country existed in that year.</li>
<li>Implicit missing values are used to represent missing data because a country did not exist in that year.</li>
</ul>
</div>
</div>
<div id="exercise-12.6.2" class="section level3 unnumbered exercise" data-number="12.6.2">
<h3>Exercise 12.6.2<a href="#exercise-12.6.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What happens if you neglect the <code>mutate()</code> step?
(<code>mutate(key = str_replace(key, "newrel", "new_rel")</code>)</p>
</div>
<div class="answer">
<p>The <code>separate()</code> function emits the warning “too few values”.
If we check the rows for keys beginning with <code>"newrel_"</code>, we see that <code>sexage</code> is missing,
and <code>type = m014</code>.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1">who3a &lt;-<span class="st"> </span>who1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb387-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">"new"</span>, <span class="st">"type"</span>, <span class="st">"sexage"</span>), <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb387-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2580 rows [243,</span></a>
<a class="sourceLine" id="cb387-4" data-line-number="4"><span class="co">#&gt; 244, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 903,</span></a>
<a class="sourceLine" id="cb387-5" data-line-number="5"><span class="co">#&gt; 904, 905, 906, ...].</span></a>
<a class="sourceLine" id="cb387-6" data-line-number="6"></a>
<a class="sourceLine" id="cb387-7" data-line-number="7"><span class="kw">filter</span>(who3a, new <span class="op">==</span><span class="st"> "newrel"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a>
<a class="sourceLine" id="cb387-8" data-line-number="8"><span class="co">#&gt; # A tibble: 6 x 8</span></a>
<a class="sourceLine" id="cb387-9" data-line-number="9"><span class="co">#&gt;   country     iso2  iso3   year new    type  sexage cases</span></a>
<a class="sourceLine" id="cb387-10" data-line-number="10"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb387-11" data-line-number="11"><span class="co">#&gt; 1 Afghanistan AF    AFG    2013 newrel m014  &lt;NA&gt;    1705</span></a>
<a class="sourceLine" id="cb387-12" data-line-number="12"><span class="co">#&gt; 2 Afghanistan AF    AFG    2013 newrel f014  &lt;NA&gt;    1749</span></a>
<a class="sourceLine" id="cb387-13" data-line-number="13"><span class="co">#&gt; 3 Albania     AL    ALB    2013 newrel m014  &lt;NA&gt;      14</span></a>
<a class="sourceLine" id="cb387-14" data-line-number="14"><span class="co">#&gt; 4 Albania     AL    ALB    2013 newrel m1524 &lt;NA&gt;      60</span></a>
<a class="sourceLine" id="cb387-15" data-line-number="15"><span class="co">#&gt; 5 Albania     AL    ALB    2013 newrel m2534 &lt;NA&gt;      61</span></a>
<a class="sourceLine" id="cb387-16" data-line-number="16"><span class="co">#&gt; 6 Albania     AL    ALB    2013 newrel m3544 &lt;NA&gt;      32</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.6.3" class="section level3 unnumbered exercise" data-number="12.6.3">
<h3>Exercise 12.6.3<a href="#exercise-12.6.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>I claimed that <code>iso2</code> and <code>iso3</code> were redundant with country.
Confirm this claim.</p>
</div>
<div class="answer">
<p>If <code>iso2</code> and <code>iso3</code> are redundant with <code>country</code>, then, within each country,
there should only be one distinct combination of <code>iso2</code> and <code>iso3</code> values, which is the case.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" data-line-number="1"><span class="kw">select</span>(who3, country, iso2, iso3) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb388-2" data-line-number="2"><span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb388-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb388-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb388-5" data-line-number="5"><span class="co">#&gt; # A tibble: 0 x 3</span></a>
<a class="sourceLine" id="cb388-6" data-line-number="6"><span class="co">#&gt; # Groups:   country [0]</span></a>
<a class="sourceLine" id="cb388-7" data-line-number="7"><span class="co">#&gt; # … with 3 variables: country &lt;chr&gt;, iso2 &lt;chr&gt;, iso3 &lt;chr&gt;</span></a></code></pre></div>
<p>This makes sense, since <code>iso2</code> and <code>iso3</code> contain the 2- and 3-letter country abbreviations for the country.
The <code>iso2</code> variable contains each country’s <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166 alpha-2</a>, and the <code>iso3</code> variable contains each country’s <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166 alpha-3</a> abbreviation.
You may recognize the ISO 3166-2 abbreviations, since they are almost identical to internet <a href="https://en.wikipedia.org/wiki/Country_code_top-level_domain">country-code top level domains</a>, such as <code>.uk</code> (United Kingdom), <code>.ly</code> (Libya), <code>.tv</code> (Tuvalu), and <code>.io</code> (British Indian Ocean Territory).</p>
</div>
</div>
<div id="exercise-12.6.4" class="section level3 unnumbered exercise" data-number="12.6.4">
<h3>Exercise 12.6.4<a href="#exercise-12.6.4" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>For each country, year, and sex compute the total number of cases of TB.
Make an informative visualization of the data.</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1">who5 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb389-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(country, year, sex) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb389-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1995</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb389-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cases =</span> <span class="kw">sum</span>(cases)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb389-5" data-line-number="5"><span class="st">  </span><span class="kw">unite</span>(country_sex, country, sex, <span class="dt">remove =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb389-6" data-line-number="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> cases, <span class="dt">group =</span> country_sex, <span class="dt">colour =</span> sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb389-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_line</span>()</a>
<a class="sourceLine" id="cb389-8" data-line-number="8"><span class="co">#&gt; `summarise()` regrouping output by 'country', 'year' (override with `.groups` argument)</span></a></code></pre></div>
<p><img src="tidy_files/figure-html/unnamed-chunk-57-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>A small multiples plot faceting by country is difficult given the number of countries.
Focusing on those countries with the largest changes or absolute magnitudes after providing the context above is another option.</p>
</div>
</div>
</div>
<div id="non-tidy-data" class="section level2 r4ds-section">
<h2>
<a href="#non-tidy-data" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">12.7</span> Non-tidy data<a href="https://r4ds.had.co.nz/tidy-data.html#non-tidy-data" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div class="alert alert-warning hints-alert">
<div class="hints-icon">
<i class="fa fa-exclamation-circle"></i>
</div>
<div class="hints-container">No exercises</div>
</div>
<p>[ex-12.2.2]: It would be better to join these tables using the methods covered in the <a href="https://r4ds.had.co.nz/relational-data.html">Relational Data</a>.
We could use <code>inner_join(t2_cases, t2_population, by = c("country", "year"))</code>.</p>
<p>[non-syntactic]: See the <a href="https://r4ds.had.co.nz/tibbles.html#tibbles">Creating Tibbles</a> section.</p>

</div>
</div>
            </section>
</div>
        </div>
      </div>
<a href="data-import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="relational-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script><script src="libs/gitbook-2.6.7/js/lunr.js"></script><script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script><script src="libs/gitbook-2.6.7/js/plugin-search.js"></script><script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script><script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script><script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script><script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script><script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script><script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jrnold/r4ds-exercise-solutions/edit/master/tidy.Rmd",
"text": "Edit"
},
"history": {
"link": "https://github.com/jrnold/r4ds-exercise-solutions/commits/master/tidy.Rmd",
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
